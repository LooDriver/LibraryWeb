/*! For license information please see easydata.min.js.LICENSE.txt */
window.easydata=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=26)}([function(t,e,n){"use strict";n.r(e),n.d(e,"DataType",(function(){return r.a})),n.d(e,"EntityAttrKind",(function(){return i})),n.d(e,"EditorTag",(function(){return o})),n.d(e,"HttpMethod",(function(){return a.a})),n.d(e,"HttpRequest",(function(){return s.a})),n.d(e,"HttpResponseError",(function(){return u.b})),n.d(e,"HttpClient",(function(){return u.a})),n.d(e,"MetaData",(function(){return p})),n.d(e,"MetaEntity",(function(){return d})),n.d(e,"MetaEntityAttr",(function(){return h})),n.d(e,"ValueEditor",(function(){return f})),n.d(e,"ColumnAlignment",(function(){return g.a})),n.d(e,"DataColumn",(function(){return g.b})),n.d(e,"DataColumnList",(function(){return g.c})),n.d(e,"DataRow",(function(){return m.a})),n.d(e,"EasyDataTable",(function(){return y.a})),n.d(e,"EventEmitter",(function(){return b})),n.d(e,"i18n",(function(){return l.a})),n.d(e,"EasyGuid",(function(){return v})),n.d(e,"repeatString",(function(){return w.b})),n.d(e,"reverseString",(function(){return w.c})),n.d(e,"strEndsWith",(function(){return w.d})),n.d(e,"combinePath",(function(){return w.a})),n.d(e,"utils",(function(){return c.a}));var i,r=n(2);!function(t){t[t.Data=0]="Data",t[t.Virtual=1]="Virtual",t[t.Lookup=2]="Lookup"}(i||(i={}));var o={Unknown:"Unknown",Edit:"EDIT",DateTime:"DATETIME",List:"LIST",CustomList:"CUSTOMLIST"},a=n(8),s=n(12),u=n(18),l=n(4),c=n(3),d=function(){function t(t){this.name="",this.caption="",this.description="",this.parent=t,this.attributes=new Array,this.subEntities=new Array}return t.prototype.loadFromData=function(t,e){if(e){if(this.id=e.id,this.name=e.name,this.captionPlural=e.namePlur,this.caption=e.name,this.description=e.desc,this.subEntities=new Array,e.ents)for(var n=0;n<e.ents.length;n++){var i=t.createEntity(this);i.loadFromData(t,e.ents[n]),this.subEntities.push(i)}if(this.attributes=new Array,e.attrs)for(n=0;n<e.attrs.length;n++){var r=t.createEntityAttr(this);r.loadFromData(t,e.attrs[n]),this.attributes.push(r)}}},t.prototype.scan=function(t,e){var n={stop:!1},i=function(r){if(e&&e(r,n),r.attributes)for(var o=r.attributes.length,a=0;a<o&&!n.stop;a++){var s=r.attributes[a];if(t&&t(s,n),n.stop)return}if(r.subEntities){var u=r.subEntities.length;for(a=0;a<u&&!n.stop;a++)i(r.subEntities[a])}};i(this)},t}(),h=function(){function t(t){this.id="",this.caption="{Unrecognized attribute}",this.dataType=r.a.String,this.size=0,this.isPrimaryKey=!1,this.isForeignKey=!1,this.isNullable=!0,this.showOnView=!0,this.isEditable=!0,this.showOnCreate=!0,this.showOnEdit=!0,this.showInLookup=!1,this.lookupAttr="",this.expr="",this.entity=t,this.kind=i.Data}return t.prototype.loadFromData=function(t,e){e&&(this.id=e.id,this.description=e.desc,this.caption=e.cptn,this.dataType=e.dtype,this.isPrimaryKey=e.ipk,this.isForeignKey=e.ifk,this.size=e.size,this.lookupAttr=e.lattr,this.lookupEntity=e.lent,this.dataAttr=e.dattr,this.lookupDataAttr=e.ldattr,this.isNullable=c.a.getIfDefined(e.nul,this.isNullable),this.isEditable=c.a.getIfDefined(e.ied,this.isEditable),this.showOnView=c.a.getIfDefined(e.ivis||e.sov,this.showOnView),this.showOnCreate=c.a.getIfDefined(e.soc,this.showOnCreate),this.showOnEdit=c.a.getIfDefined(e.soe,this.showOnEdit),this.showInLookup=c.a.getIfDefined(e.sil,this.showInLookup),this.kind=e.kind,this.displayFormat=e.dfmt,e.udata&&(this.userData=e.udata),e.edtr&&(this.defaultEditor=t.getEditorById(e.edtr)||t.createValueEditor()))},t}(),f=function(){function t(){this.id="",this.tag=o.Unknown,this.resType=r.a.Unknown,this.defValue=""}return t.prototype.loadFromData=function(t){t&&(this.id=t.id,this.tag=t.tag,this.defValue=t.defval,this.resType=t.rtype,t.subType&&(this.resType=t.subType),t.name&&(this.name=t.name),t.values&&(this.values=t.values))},t.prototype.getValueText=function(t){var e="";if(!this.values)return e;if(Array.isArray(t))for(var n=0,i=this.values;n<i.length;n++){var r=i[n];t.indexOf(r.id)>=0&&(e+=r.text+",")}else for(var o=0,a=this.values;o<a.length;o++){(r=a[o]).id===t&&(e+=r.text+",")}return e&&(e=e.substring(0,e.length-1)),e},t}(),p=function(){function t(){this.mainEntity=null,this.id="__none",this.name="Empty model",this.rootEntity=this.createEntity()}return t.prototype.getMainEntity=function(){return this.mainEntity},t.prototype.createEntity=function(t){return new d(t)},t.prototype.createEntityAttr=function(t){return new h(t)},t.prototype.createValueEditor=function(){return new f},t.prototype.loadFromJSON=function(t){var e=JSON.parse(t);this.loadFromData(e)},t.prototype.loadFromData=function(t){if(this.id=t.id,this.name=t.name,this.version=t.vers,this.editors=new Array,t.editors)for(var e=0;e<t.editors.length;e++){var n=this.createValueEditor();n.loadFromData(t.editors[e]),this.editors.push(n)}this.rootEntity.loadFromData(this,t.entroot)},t.prototype.setData=function(t){"string"==typeof t?this.loadFromJSON(t):this.loadFromData(t)},t.prototype.isEmpty=function(){return 0===this.rootEntity.subEntities.length&&0===this.rootEntity.attributes.length},t.prototype.getId=function(){return this.id},t.prototype.getName=function(){return this.name},t.prototype.getRootEntity=function(){return this.rootEntity},t.prototype.getEditorById=function(t){for(var e=0,n=this.editors;e<n.length;e++){var i=n[e];if(i.id===t)return i}return null},t.prototype.getAttributeById=function(t){var e=this.getEntityAttrById(this.getRootEntity(),t);return e||null},t.prototype.checkAttrProperty=function(t,e){var n=this.getAttributeById(t);if(n){if(void 0===n[e])throw"No such property: "+e;return!!n[e]||!!n.lookupAttr&&(t=n.lookupAttr,(n=this.getAttributeById(t))&&n[e])}return!1},t.prototype.getEntityAttrById=function(t,e){var n,i;if(t.attributes){var r=t.attributes.length;for(n=0;n<r;n++)if(t.attributes[n].id==e)return t.attributes[n]}if(t.subEntities){var o=t.subEntities.length;for(n=0;n<o;n++)if(i=this.getEntityAttrById(t.subEntities[n],e))return i}return null},t.prototype.listByEntityWithFilter=function(t,e){var n,i=new Array,r=null;if(t.subEntities)for(var o=t.subEntities.length,a=0;a<o;a++){if(r=t.subEntities[a],!e||e(r,null))(n=l.a.getText("Entities",r.name))||(n=r.caption),(h=c.a.assign(this.createEntity(),{id:r.name,text:n,items:[],isEntity:!0})).items=this.listByEntityWithFilter(r,e),h.items.length>0&&i.push(h)}var s=null;if(t.attributes)for(var u=t.attributes.length,d=0;d<u;d++)if(s=t.attributes[d],!e||e(t,s)){(n=l.a.getText("Attributes",s.id))||(n=s.caption);var h=c.a.assign(this.createEntity(),{id:s.id,text:n,dataType:s.dataType});i.push(h)}return i},t.prototype.listByEntity=function(t,e,n){e=e||{};var i,r=[],o=[],a=null;if(t.subEntities)for(var s=t.subEntities.length,u=0;u<s;u++)if(a=t.subEntities[u],!n||n(a,null)){i=l.a.getText("Entities",a.name)||a.caption;var d=c.a.assign(this.createEntity(),{id:a.name,text:i,items:[],isEntity:!0,description:a.description}),h=c.a.assign({},e);h.includeRootData=!1,d.items=this.listByEntity(a,h,n),d.items.length>0&&r.push(d)}var f=null;if(t.attributes)for(var p=t.attributes.length,g=0;g<p;g++)f=t.attributes[g],n&&!n(t,f)||(i=l.a.getText("Attributes",f.id)||f.caption,o.push(c.a.assign(this.createEntityAttr(t),{id:f.id,text:i,dataType:f.dataType,lookupAttr:f.lookupAttr,description:f.description})));var m,y=function(t,e){return t.text.toLowerCase()==e.text.toLowerCase()?0:t.text.toLowerCase()>e.text.toLowerCase()?1:-1};return e.sortEntities&&(r.sort(y),o.sort(y)),m=e.attrPlacement&&0!=e.attrPlacement?o.concat(r):r.concat(o),2==e.attrPlacement&&m.sort(y),e.includeRootData?((i=l.a.getText("Entities",t.name))||(i=t.caption),{id:t.name,text:i,items:m}):m},t.prototype.clear=function(){this.rootEntity=this.createEntity(),this.editors=[],this.version=""},t.prototype.addDefaultValueEditors=function(){this.addOrUpdateValueEditor("_DTE",o.Edit,r.a.String).defValue="",this.addOrUpdateValueEditor("_DPDE",o.DateTime,r.a.DateTime),this.addOrUpdateValueEditor("_DPTE",o.DateTime,r.a.DateTime)},t.prototype.addOrUpdateValueEditor=function(t,e,n){var i=c.a.findItemById(this.editors,t);return i||((i=this.createValueEditor()).id=t,this.editors.push(i)),i.tag=e,i.resType=n,i},t.prototype.getEntitiesTree=function(t,e){return this.listByEntity(this.getRootEntity(),t,e)},t.prototype.getEntitiesTreeWithFilter=function(t){return this.listByEntityWithFilter(this.getRootEntity(),t)},t.prototype.getFullEntityPathByAttr=function(t,e){return e=e||" ",this.getEntityPathByAttr(this.getRootEntity(),t,e,!0)},t.prototype.getEntityPathByAttr=function(t,e,n,i){if(!t)return"";n=n||" ";var r="";if(t.caption&&!i){var o=l.a.getText("Entities",t.caption);r=o||t.caption}if(t.attributes)for(var a=t.attributes.length,s=0;s<a;s++)if(t.attributes[s].id==e)return r;if(t.subEntities){var u=t.subEntities.length;for(s=0;s<u;s++){var c=t.subEntities[s],d=this.getEntityPathByAttr(c,e,n,!1);if(""!==d)return""!==r&&(d=r+n+d),d}}return""},t.prototype.getAttributeText=function(t,e){var n=l.a.getText("Attributes",t.id);if(n||(n=t.caption),!e)return n;var i=this.getFullEntityPathByAttr(t.id," ");return(i?e.replace(new RegExp("{attr}","g"),n).replace(new RegExp("{entity}","g"),i):n).trim()},t.prototype.runThroughEntities=function(t,e){this.getRootEntity().scan(t,e)},t.prototype.getFirstAttributeByFilter=function(t){var e=null;return this.runThroughEntities((function(n,i){t(n)&&(i.stop=!0,e=n)}),null),e},t}(),g=n(13),m=n(11),y=n(22),v=function(){function t(){}return t.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},t}(),b=function(){function t(t){this.silentMode=0,this.events=new Array,this.source=t}return t.prototype.subscribe=function(t,e){var n=this.getEventRecByType(t),i={id:v.newGuid(),callback:e};return n?n.eventCallbacks.push(i):(n={type:t,eventCallbacks:new Array(i)},this.events.push(n)),i.id},t.prototype.unsubscribe=function(t,e){var n=this.getEventRecByType(t);if(n){var i=-1;for(i=0;i<n.eventCallbacks.length&&n.eventCallbacks[i].id!==e;i++);i>=0&&n.eventCallbacks.splice(i,1)}},t.prototype.fire=function(t,e,n,i){if(void 0===n&&(n=0),void 0===i&&(i=!1),!this.silentMode||i){var r=this.getEventRecByType(t);if(r){var o={type:t,source:this.source,data:e},a=function(){for(var t=0,e=r.eventCallbacks;t<e.length;t++){e[t].callback(o)}};n>0?setTimeout(a,n):a()}}},t.prototype.enterSilentMode=function(){this.silentMode++},t.prototype.exitSilentMode=function(){this.silentMode&&this.silentMode--},t.prototype.isSilent=function(){return this.silentMode>0},t.prototype.getEventRecByType=function(t){for(var e=0,n=this.events;e<n.length;e++){var i=n[e];if(i.type==t)return i}return null},t}(),w=n(10);l.a.resetLocales(),"function"!=typeof Object.values&&(Object.values=function(t){return Object.keys(t).map((function(e){return t[e]}))}),"function"!=typeof Math.trunc&&(Math.trunc=function(t){return isNaN(t)?NaN:t>0?Math.floor(t):Math.ceil(t)})},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return l}));var i,r=n(15),o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(){function t(t,e){this.element="string"==typeof t?document.createElement(t):t,e&&this.element.parentElement!==e&&e.appendChild(this.element)}return t.prototype.addChild=function(t,e){var n=l(t,this.element);return e&&e(n),this},t.prototype.addChildElement=function(t){return t&&this.element.appendChild(t),this},t.prototype.attr=function(t,e){return this.element.setAttribute(t,e),this},t.prototype.id=function(t){return this.attr("id",t)},t.prototype.title=function(t){return this.attr("title",t)},t.prototype.data=function(t,e){return void 0===e&&(e=null),null===e?(this.element.removeAttribute("data-"+t),this):this.attr("data-"+t,e)},t.prototype.show=function(){return this.removeStyle("display")},t.prototype.hide=function(t){return void 0===t&&(t=!0),t?this.setStyle("display","none"):this},t.prototype.visible=function(t){return void 0===t&&(t=!0),t?this.setStyle("visibility","visible"):this.setStyle("visibility","hidden")},t.prototype.isVisible=function(){return!!(this.element.offsetWidth||this.element.offsetHeight||this.element.getClientRects().length)},t.prototype.addClass=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t)for(var i=t.trim().split(" ").concat(e),r=0;r<i.length;r++)this.element.classList.add(i[r]);return this},t.prototype.removeClass=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t)for(var i=t.trim().split(" ").concat(e),r=0;r<i.length;r++)this.element.classList.remove(i[r]);return this},t.prototype.toggleClass=function(t,e){return void 0===e&&(e=void 0),t&&this.element.classList.toggle(t,e),this},t.prototype.on=function(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)this.element.addEventListener(n[i],e);return this},t.prototype.off=function(t,e){for(var n=t.split(" "),i=0;i<n.length;i++)this.element.removeEventListener(n[i],e);return this},t.prototype.setStyle=function(t,e){return this.element.style.setProperty(t,e),this},t.prototype.removeStyle=function(t){return this.element.style.removeProperty(t),this},t.prototype.text=function(t){return this.element.innerText=t,this},t.prototype.html=function(t){return this.element.innerHTML=t,this},t.prototype.clear=function(){var t=this.element;this.element=document.createElement(this.element.tagName),t.replaceWith(this.element)},t.prototype.addText=function(t){var e=document.createTextNode(t);return this.element.appendChild(e),this},t.prototype.addHtml=function(t){return this.element.innerHTML+=t,this},t.prototype.toDOM=function(){return this.element},t.prototype.appendTo=function(t){return t&&t.appendChild(this.element),this},t}(),s=function(t){function e(e,n){return e?t.call(this,e,n)||this:t.call(this,"input",n)||this}return o(e,t),e.prototype.name=function(t){return this.element.name=t,this},e.prototype.type=function(t){return this.element.type=t,this},e.prototype.size=function(t){return this.element.size=t,this},e.prototype.value=function(t){return t instanceof Date?this.element.valueAsDate=t:"number"==typeof t?this.element.valueAsNumber=t:this.element.value=t,this},e.prototype.mask=function(t){return Object(r.a)(this.element,t),this},e}(a),u=function(t){function e(e,n){return e?t.call(this,e,n)||this:t.call(this,"select",n)||this}return o(e,t),e.prototype.addOption=function(t){var e=document.createElement("option");return"string"==typeof t?(e.value=t,e.innerHTML=t):(e.value=t.value,e.innerHTML=t.title||t.value,e.selected=t.selected||!1),this.element.appendChild(e),this},e}(a);function l(t,e){return"div"===t||t instanceof HTMLDivElement||"span"===t||t instanceof HTMLSpanElement||"a"===t||t instanceof HTMLAnchorElement||"button"===t||t instanceof HTMLButtonElement||"img"===t||t instanceof HTMLImageElement?new a(t,e):"input"===t||t instanceof HTMLInputElement?new s(t instanceof HTMLInputElement?t:null,e):"select"===t||t instanceof HTMLSelectElement?new u(t instanceof HTMLSelectElement?t:null,e):new a(t,e)}},function(t,e,n){"use strict";var i;n.d(e,"a",(function(){return i})),function(t){t[t.Unknown=0]="Unknown",t[t.String=1]="String",t[t.Byte=2]="Byte",t[t.Word=3]="Word",t[t.Int32=4]="Int32",t[t.Int64=5]="Int64",t[t.Bool=6]="Bool",t[t.Float=7]="Float",t[t.Currency=8]="Currency",t[t.BCD=9]="BCD",t[t.Date=10]="Date",t[t.Time=11]="Time",t[t.DateTime=12]="DateTime",t[t.Autoinc=13]="Autoinc",t[t.Memo=14]="Memo",t[t.Blob=15]="Blob",t[t.FixedChar=16]="FixedChar",t[t.Guid=17]="Guid",t[t.Geometry=18]="Geometry",t[t.Geography=19]="Geography"}(i||(i={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i,r=n(10),o=n(2),a=n(4);!function(t){t.getAllDataTypes=function(){return Object.values(o.a)},t.getDateDataTypes=function(){return[o.a.Time,o.a.Date,o.a.DateTime]},t.getStringDataTypes=function(){return[o.a.String,o.a.Memo]};var e=[o.a.Byte,o.a.Word,o.a.Int32,o.a.Int64,o.a.Float,o.a.Currency],n=[o.a.Byte,o.a.Word,o.a.Int32,o.a.Int64];function i(t,e,n){e||(e={});for(var r=0,o=n;r<o.length;r++){var a=o[r];if(a)for(var u in a)if(a.hasOwnProperty(u)){var l=a[u];null!==l&&"object"==typeof l?t.has(l)?e[u]=t.get(l):Array.isArray(l)?(e[u]=s(l),t.set(l,e[u])):(void 0===e[u]&&(e[u]=Object.create(Object.getPrototypeOf(l))),t.set(l,e[u]),i(t,e[u],[l])):e[u]=l}}return e}function s(t){for(var e=[],n=0,i=t;n<i.length;n++){var r=i[n];e.push(r)}return e}t.assign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i++){var r=e[i];if(r)for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t},t.assignDeep=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return i(new WeakMap,t,e)},t.getIfDefined=function(t,e){return void 0!==t?t:e},t.IsDefinedAndNotNull=function(t){return null!=t},t.copyArrayTo=function(t,e){for(var n=t.length,i=e.length,r=0;r<n&&r<i;r++)e[r]=t[r]},t.createArrayFrom=s,t.findItemById=function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i].id===e)return t[i];return null},t.findItemIndexById=function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i].id===e)return i;return-1},t.indexOfArrayItem=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=t.length,i=0;i<n;i++)if(e==t[i])return i;return-1},t.moveArrayItem=function(t,e,n){if(e>=t.length)throw"Index out of bounds: "+e;n>=t.length&&(n=t.length-1);var i=t.splice(e,1)[0];t.splice(n,0,i)},t.removeArrayItem=function(t,e){var n=t.indexOf(e);if(-1!=n)return t.splice(n,1)[0]},t.insertArrayItem=function(t,e,n){t.splice(e,0,n)},t.fillArray=function(t,e,n,i){void 0===n&&(n=0);for(var r=t.length>>>0,o=n>>0,a=o<0?Math.max(r+o,0):Math.min(o,r),s=void 0===i?r:i>>0,u=s<0?Math.max(r+s,0):Math.min(s,r);a<u;)t[a]=e,a++;return t},t.shiftToFitWindow=function(t,e){var n=document.getElementsByTagName("body")[0],i=window.innerWidth||document.documentElement.clientWidth||n.clientWidth,r=t+e,o=0;return r>i&&t+(o=i-r-10)<0&&(o=10-t),o},t.isObject=function(t){return null!==t&&("function"==typeof t||"object"==typeof t)},t.isNumericType=function(t){return e.indexOf(t)>=0},t.isIntType=function(t){return n.indexOf(t)>=0},t.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},t.areCompatibleDataTypes=function(t,e){return void 0===t||void 0===e||t==o.a.Unknown||e==o.a.Unknown||t==e||t==o.a.Date&&e==o.a.DateTime||t==o.a.DateTime&&e==o.a.Date},t.isPropSet=function(t,e){return t[e]||t[e.toLowerCase()]||t[e.toUpperCase()]};var u="0123456789abcdefghijklmnopqrstuvwxyz";function l(t,e){var n=t.length;if(n>e){var i=n/e,r="";r+=t[0];for(var o=i,a=void 0,s=1;s<n;s++)a=t[s],s+1>o&&(r+=a,o+=i);return r}return t}function c(t,e,n){return t.substr(0,e)+n+t.substr(e+n.length)}function d(t,e){return Math.floor(Math.random()*(e-t))+t}function h(t){if(!/^\d+$/.test(t))throw"Is not a valid number";return parseInt(t)}t.generateId=function(t){t||(t="easy");var e=t.length>4?function(t,e){var n=t.split("-"),i=1,r=e;n.length<e&&(i=e/n.length,r=n.length);for(var o="",a=0;a<r;a++)o+=l(n[a],i);return o}(t,4):t;e&&e.length>0&&(e+="-");var n=r.b("",2),i=u.length-1;return n=c(n,0,u[d(0,i)]),e+(n=c(n,1,u[d(0,i)]))+function(t){var e=36,n=14,i=r.b("",n),o=t;do{i=c(i,n--,u[o%e]),o=Math.floor(o/=e)}while(o>0);return r.c(i.trim())}(621355968e9+1e4*(new Date).getTime()-0x8d60e562e627800)},t.strToDateTime=function(t,e){if(!t||0==t.length)return new Date;var n=t.replace(/[^a-zA-Z0-9_]/g,"-"),i=e.replace(/[^a-zA-Z0-9_]/g,"-").split("-"),r=n.split("-"),o=i.indexOf("MM"),a=i.indexOf("dd"),s=i.indexOf("yyyy"),u=i.indexOf("HH"),l=i.indexOf("mm"),c=i.indexOf("ss"),d=new Date;try{var f=s>-1&&s<r.length?h(r[s]):d.getFullYear(),p=o>-1&&o<r.length?h(r[o])-1:d.getMonth()-1;if(p>11)throw"";var g=a>-1&&a<r.length?h(r[a]):d.getDate();if(g>function(t,e){return new Date(e,t+1,0).getDate()}(p,f))throw"";var m=u>-1&&u<r.length?h(r[u]):0;if(m>23)throw"";var y=l>-1&&l<r.length?h(r[l]):0;if(y>59)throw"";var v=c>-1&&c<r.length?h(r[c]):0;if(v>59)throw"";return new Date(f,p,g,m,y,v)}catch(t){throw"Is not a valid date time."}};var f=/\[([^\]]+)]|y{4}|M{1,4}|d{1,2}|H{1,2}|h{1,2}|m{2}|s{2}|t{2}/g;t.dateTimeToStr=function(t,e){var n=t.getFullYear(),i=t.getMonth()+1,r=t.getDate(),o=t.getHours(),s=t.getMinutes(),u=t.getSeconds(),l=o%12||12,c=o>11,d={yyyy:n.toString(),MMMM:a.a.getLongMonthName(i),MMM:a.a.getShortMonthName(i),MM:i<10?"0"+i:i.toString(),M:i.toString(),dd:r<10?"0"+r:r.toString(),d:r.toString(),HH:o<10?"0"+o:o.toString(),H:o.toString(),hh:l<10?"0"+l:l.toString(),h:l.toString(),tt:c?"PM":"AM",mm:s<10?"0"+s:s.toString(),ss:u<10?"0"+u:u.toString()};return e.replace(f,(function(t,e){return e||d[t]}))},t.numberToStr=function(t,e){return e=e||a.a.getLocaleSettings().decimalSeparator,t.toString().replace(".",e)}}(i||(i={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i,r=n(2),o=n(3);!function(t){var e,n={shortDateFormat:"MM/dd/yyyy",longDateFormat:"dd MMM, yyyy",editDateFormat:"MM/dd/yyyy",shortTimeFormat:"HH:mm",editTimeFormat:"HH:mm",longTimeFormat:"HH:mm:ss",shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],shortWeekDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longWeekDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalSeparator:".",currency:"USD"},i={localeId:"en-US",englishName:"English",displayName:"English",texts:{ButtonOK:"OK",ButtonCancel:"Cancel"},settings:n},a={"en-US":i},s=[];function u(t){for(var e=0,n=s;e<n.length;e++){(0,n[e])(t)}}function l(){return e.localeId}function c(t){var n=a[t];n?o.a.assignDeep(e,n):(e.englishName=t,e.displayName=t,e.texts=o.a.assignDeep({},i.texts)),e.localeId=t}function d(){return e.settings}function h(t){e.settings||(e.settings=o.a.assignDeep({},n)),e.settings=o.a.assignDeep(e.settings,t)}function f(t,n){u(n);var r=e;t&&(n.localeId||(n.localeId=t),(r=a[t])||(r=o.a.assignDeep({},i),a[t]=r)),o.a.assignDeep(r,n)}function p(){var t,n,i,r,o,a,s="object"==typeof navigator?navigator.language:void 0;t=s,n=new Date(2020,5,7,19,34,56,88),i=n.toLocaleDateString(t,{year:"numeric",month:"numeric",day:"numeric"}),r=n.toLocaleTimeString(t,{hour:"numeric",minute:"numeric",second:"numeric"}),o=i.replace("07","dd").replace("7","d").replace("06","MM").replace("6","M").replace("2020","yyyy").replace("20","yy"),a=r.replace("19","HH").replace("07","hh").replace("7","h").replace("34","mm").replace("56","ss").replace("PM","tt"),e.settings||(e.settings={}),h({shortDateFormat:o,editDateFormat:o,shortTimeFormat:a})}function g(t){var e,n=d();switch(t){case r.a.Date:e=n.shortDateFormat;break;case r.a.Time:e=n.shortTimeFormat;break;default:e=n.shortDateFormat+" "+n.shortTimeFormat}return e}function m(t){var e,n=d();switch(t){case r.a.Date:e=n.longDateFormat;break;case r.a.Time:e=n.longTimeFormat;break;default:e=n.longDateFormat+" "+n.longTimeFormat}return e}t.addMapper=function(t){s.push(t)},t.getLocales=function(){var t=[];for(var e in a)t.push({locale:e,englishName:a[e].englishName,displayName:a[e].displayName});return t.sort((function(t,e){return t.englishName>e.englishName?1:t.englishName===e.englishName?0:-1}))},t.getCurrentLocale=l,t.setLocale=function(t){console.warn("This method is deprecated. Use setCurrentLocale instead"),c(t)},t.setCurrentLocale=c,t.getText=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.texts,r="";if(t&&t.length)for(var o=t.length,a=0;a<o&&"object"==typeof(r=i[t[a]]);a++)i=r;return r},t.getLocaleSettings=d,t.getOneLocaleSetting=function(t){return e.settings[t]},t.getShortMonthName=function(t){var e=d();if(t>0&&t<13)return e.shortMonthNames[t-1];throw"Wrong month number: "+t},t.getLongMonthName=function(t){var e=d();if(t>0&&t<13)return e.longMonthNames[t-1];throw"Wrong month number: "+t},t.getShortWeekDayName=function(t){var e=d();if(t>0&&t<8)return e.shortWeekDayNames.length>=t?e.shortWeekDayNames[t-1]:t.toString();throw"Wrong month number: "+t},t.getLongWeekDayName=function(t){var e=d();if(t>0&&t<8)return e.longWeekDayNames.length>=t?e.longWeekDayNames[t-1]:t.toString();throw"Wrong month number: "+t},t.updateLocaleSettings=h,t.updateLocaleTexts=function(t){"object"==typeof t?(u({localeId:e.localeId,texts:t}),o.a.assignDeep(e.texts,t)):console.error("Wrong parameter type in updateLocaleTexts function call.The first parameter (localeId) is not necessary. Use updateLocaleTexts(texts) instead")},t.updateDefaultTexts=function(t){for(var n in a){var i=a[n];i.texts=o.a.assignDeep({},t,i.texts)}e.texts=o.a.assignDeep({},t,e.texts)},t.updateLocaleInfo=f,t.addLocale=function(t,e){f(t,e)},t.resetLocales=function(){e||(e=o.a.assignDeep({},i),p())},t.dateTimeToStr=function(t,e,n){return n?"d"==n?n=g(r.a.Date):"D"==n?n=m(r.a.Date):"f"==n?n=g(r.a.DateTime):"F"==n&&(n=m(r.a.DateTime)):n=g(e),o.a.dateTimeToStr(t,n)},t.numberToStr=function(t,e){if(e){var n=l();return t.toLocaleString(n,function(t){var e=d(),n=t[0].toUpperCase(),i=t.length>1?Number.parseInt(t.slice(1)):"D"==n?1:2;switch(n){case"D":return{style:"decimal",useGrouping:!1,minimumIntegerDigits:i};case"C":return{style:"currency",currency:e.currency,minimumFractionDigits:i};default:return{style:"decimal",minimumFractionDigits:i}}}(e))}var i=d();return o.a.numberToStr(t,i.decimalSeparator)}}(i||(i={}))},function(t,e,n){"use strict";n.d(e,"q",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"k",(function(){return s})),n.d(e,"m",(function(){return u})),n.d(e,"p",(function(){return l})),n.d(e,"l",(function(){return c})),n.d(e,"c",(function(){return d})),n.d(e,"i",(function(){return h})),n.d(e,"f",(function(){return f})),n.d(e,"h",(function(){return p})),n.d(e,"g",(function(){return g})),n.d(e,"j",(function(){return m})),n.d(e,"n",(function(){return y})),n.d(e,"o",(function(){return v})),n.d(e,"e",(function(){return b})),n.d(e,"d",(function(){return w}));var i=n(14);function r(t,e){for(t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)}function o(t,e,n){var i=document.createElement(e),r=n||{};return r.cssClass&&(i.className=r.cssClass),t.appendChild(i),i}function a(t,e){t.className=t.className?t.className+" "+e:e}function s(t){t.style.display="none"}function u(t,e){e||(e=""),t.style.display=e}function l(t,e,n){n||(n={}),n.display||(n.display=""),n.duration||(n.duration=200),s(t),u(e,n.display),n.complete&&n.complete()}function c(t){return"none"!=t.style.display&&0!=t.offsetWidth&&0!=t.offsetHeight}function d(t){var e;return"function"==typeof Event?e=new Event(t):(e=document.createEvent("Event")).initEvent(t,!0,!0),e}function h(){return{width:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}}function f(){return i.a.IsIE()?m():{width:Math.max(document.documentElement.clientWidth,document.body.clientWidth||0),height:Math.max(document.documentElement.clientHeight,document.body.clientHeight||0)}}function p(){var t=document.body,e=document.documentElement;return{top:window.pageYOffset||e.scrollTop||t.scrollTop,left:window.pageXOffset||e.scrollLeft||t.scrollLeft}}function g(t){var e={x:0,y:0};if(null!==t){var n=function(t){var e,n={top:0,right:0,bottom:0,left:0,width:0,height:0};try{e=t.getBoundingClientRect()}catch(t){e=n}var i=document.body,r=document.documentElement,o=p(),a=o.top,s=o.left,u=r.clientTop||i.clientTop||0,l=r.clientLeft||i.clientLeft||0,c=e.top+a-u,d=e.left+s-l;return{top:Math.round(c),left:Math.round(d)}}(t);e={x:n.left,y:n.top}}return e}function m(){return{width:window.innerWidth,height:window.innerHeight}}function y(t,e,n){t.style.removeProperty("display");var i=window.getComputedStyle(t).display;"none"===i&&(i="block"),t.style.display=i;var r=t.offsetHeight;t.style.overflow="hidden",t.style.height="0px",t.style.paddingTop="0px",t.style.paddingBottom="0px",t.style.marginTop="0px",t.style.marginBottom="0px",t.offsetHeight,t.style.boxSizing="border-box",t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.height=r+"px",t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),window.setTimeout((function(){t.style.removeProperty("height"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property"),t.style.removeProperty("box-sizing"),n&&n()}),e)}function v(t,e,n){t.style.transitionProperty="height, margin, padding",t.style.transitionDuration=e+"ms",t.style.boxSizing="border-box",t.style.height=t.offsetHeight+"px",t.offsetHeight,t.style.overflow="hidden",t.style.height="0px",t.style.paddingTop="0px",t.style.paddingBottom="0px",t.style.marginTop="0px",t.style.marginBottom="0px",window.setTimeout((function(){t.style.display="none",t.style.removeProperty("height"),t.style.removeProperty("padding-top"),t.style.removeProperty("padding-bottom"),t.style.removeProperty("margin-top"),t.style.removeProperty("margin-bottom"),t.style.removeProperty("overflow"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-property"),t.style.removeProperty("box-sizing"),n&&n()}),e)}var b="eqjs",w="eqjs-mobile"},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return s}));var i,r=n(0),o=n(7);!function(t){t[t.NONE=1]="NONE",t[t.LEFT=2]="LEFT",t[t.CENTER=3]="CENTER",t[t.RIGHT=4]="RIGHT"}(i||(i={}));var a=function(){function t(t,e,n){if(void 0===n&&(n=!1),this._label=null,this.align=i.NONE,this.isVisible=!0,this.isRowNum=!1,this.dataColumn=t,this.grid=e,t){t.style.alignment&&(this.align=function(t){switch(t){case r.ColumnAlignment.Left:return i.LEFT;case r.ColumnAlignment.Center:return i.CENTER;case r.ColumnAlignment.Right:return i.RIGHT;default:return i.NONE}}(t.style.alignment));var a=t.type;switch(this.grid.cellRendererStore.getCellType(a)){case o.a.NUMBER:this.width=120;break;case o.a.DATETIME:this.width=200;break;case o.a.BOOL:this.width=80;break;default:this.width=250}this.cellRenderer=this.grid.cellRendererStore.getDefaultRenderer(t.type)}else n&&(this.isRowNum=!0,this.width=60,this._label="",this.cellRenderer=this.grid.cellRendererStore.getDefaultRendererByType(o.a.NUMBER));e&&e.options&&e.options.onGetCellRenderer&&(this.cellRenderer=e.options.onGetCellRenderer(this,this.cellRenderer)||this.cellRenderer)}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label?this._label:this.isRowNum?"":this.dataColumn.label},set:function(t){this._label=this.label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.dataColumn?this.dataColumn.type:null},enumerable:!0,configurable:!0}),t}(),s=function(){function t(t,e){this.items=[],this.grid=e,this.sync(t)}return t.prototype.sync=function(t,e){if(void 0===e&&(e=!0),this.clear(),e){var n=new a(null,this.grid,!0);this.add(n)}if(t)for(var i=0,r=t.getItems();i<r.length;i++){var o=r[i],s=new a(o,this.grid);this.grid.options.onSyncGridColumn&&this.grid.options.onSyncGridColumn(s),this.add(s)}},Object.defineProperty(t.prototype,"count",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this.items.length;return this.items.push(t),e},t.prototype.put=function(t,e){t>=0&&t<this.items.length&&(this.items[t]=e)},t.prototype.move=function(t,e){var n=this.items.indexOf(t);n>=0&&n!=e&&r.utils.moveArrayItem(this.items,n,e)},t.prototype.get=function(t){return t>=0&&t<this.items.length?this.items[t]:null},t.prototype.getItems=function(){return this.items},t.prototype.removeAt=function(t){this.get(t);this.items.splice(t,1)},t.prototype.clear=function(){this.items=[]},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return h}));var i,r=n(0),o=n(6),a=n(1),s=/{0:(.*?)}/g;!function(t){t[t.STRING=1]="STRING",t[t.NUMBER=2]="NUMBER",t[t.DATETIME=3]="DATETIME",t[t.BOOL=4]="BOOL"}(i||(i={}));var u=function(t,e,n,i){var r=t?t.toString().replace(/\n/g,"↵ "):"";Object(a.d)("div",n).addClass("keg-cell-value").addHtml(r).title(t||"")},l=function(t,e,n,i){var u=(t||"").toString();"number"==typeof t&&(u=e.dataColumn&&e.dataColumn.displayFormat&&s.test(e.dataColumn.displayFormat)?e.dataColumn.displayFormat.replace(s,(function(e,n){return r.i18n.numberToStr(t,n)})):t.toLocaleString());var l=Object(a.d)("div",n).addClass("keg-cell-value").addHtml(u).title(u);e.align==o.b.NONE&&l.addClass("keg-cell-value-align-right")},c=function(t,e,n,i){var u="[object Date]"===Object.prototype.toString.call(t),l=(t||"").toString();if(u)if(e.dataColumn&&e.dataColumn.displayFormat&&s.test(e.dataColumn.displayFormat))l=e.dataColumn.displayFormat.replace(s,(function(n,i){return r.i18n.dateTimeToStr(t,e.type,i)}));else{var c=r.i18n.getCurrentLocale(),d={hour:"numeric",minute:"numeric",second:"numeric"};switch(e.type){case r.DataType.Date:l=t.toLocaleDateString(c);break;case r.DataType.Time:l=t.toLocaleTimeString(c,d);break;case r.DataType.DateTime:l=t.toLocaleDateString(c)+" "+t.toLocaleTimeString(c,d)}}var h=Object(a.d)("div",n).addClass("keg-cell-value").addHtml(l).title(l);e.align==o.b.NONE&&h.addClass("keg-cell-value-align-right")},d=function(t,e,n,i){Object(a.d)("div",n).addClass("keg-cell-value").addClass("keg-cell-value-bool").addClass("keg-"+(t?"cell-value-true":"cell-value-false"))},h=function(){function t(t){this.renderers={},this.defaultRenderers={},this.registerRenderer("StringDefault",u),this.setDefaultRenderer(i.STRING,u),this.registerRenderer("NumberDefault",l),this.setDefaultRenderer(i.NUMBER,l),this.registerRenderer("DateTimeDefault",c),this.setDefaultRenderer(i.DATETIME,c),this.registerRenderer("BoolDefault",d),this.setDefaultRenderer(i.BOOL,d)}return t.prototype.getDefaultRenderer=function(t){var e=this.getCellType(t);return this.defaultRenderers[i[e]]},t.prototype.getDefaultRendererByType=function(t){return this.defaultRenderers[i[t]]},t.prototype.setDefaultRenderer=function(t,e){e&&(this.defaultRenderers[i[t]]=e)},t.prototype.getRenderer=function(t){return this.renderers[t]},t.prototype.registerRenderer=function(t,e){this.renderers[t]=e},t.prototype.getCellType=function(t){switch(t){case r.DataType.Autoinc:case r.DataType.Byte:case r.DataType.Word:case r.DataType.Currency:case r.DataType.Float:case r.DataType.Int32:case r.DataType.Int64:return i.NUMBER;case r.DataType.Date:case r.DataType.DateTime:case r.DataType.Time:return i.DATETIME;case r.DataType.Bool:return i.BOOL;default:return i.STRING}},t}()},function(t,e,n){"use strict";var i;n.d(e,"a",(function(){return i})),function(t){t.Trace="TRACE",t.Options="OPTIONS",t.Get="GET",t.Put="PUT",t.Post="POST",t.Delete="DELETE"}(i||(i={}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return d}));var i,r=n(0),o=n(5),a=n(1),s="undefined"!=typeof TouchEvent;!function(t){t.None="none",t.Allow="allow",t.Forbid="forbid"}(i||(i={}));var u=function(t,e,n){this.dropEffect=i.Allow,this.pageX=0,this.pageY=0,this.item=t,this.dragImage=e,this.data=t.data,this.sourceEvent=n,n&&n instanceof MouseEvent&&(this.pageX=n.pageX,this.pageY=n.pageY),n&&s&&n instanceof TouchEvent&&n.touches[0]&&(this.pageX=n.touches[0].pageX,this.pageY=n.touches[0].pageY)},l=function(t){t&&t instanceof MouseEvent&&(this.x=t.pageX,this.y=t.pageY),t&&s&&t instanceof TouchEvent&&t.touches[0]&&(this.x=t.touches[0].pageX,this.y=t.touches[0].pageY)},c=function(){function t(){this.delta=5,this.draggableItem=null,this.dragImage=null,this.finishedSuccessfully=!1,this.mouseDownPosition=null,this.containerDescriptors=[],this.containerDescriptorIndex=-1,this.dropEffect=i.None,this.classPrefix="eqjs-drop",this.DRAG_DISABLED_ATTR="drag-disabled"}return t.prototype.registerDraggableItem=function(t){var e=this,n=t.element;if(!n)throw Error("Element in draggle item is null or undefined");n.ondragstart=function(){return!1};var r=function(t){if(!n.hasAttribute(e.DRAG_DISABLED_ATTR)){t.preventDefault(),t instanceof MouseEvent&&t.stopPropagation();var i=new l(t);(Math.abs(i.x-e.mouseDownPosition.x)>e.delta||Math.abs(i.y-e.mouseDownPosition.y)>e.delta)&&c(t)}},o=function(t){e.mouseMoveDragListener(t)},c=function(s){s.preventDefault(),s.stopPropagation(),n.removeEventListener("mousemove",r),n.removeEventListener("touchmove",r),e.finishedSuccessfully=!1,t.beforeDragStart&&t.beforeDragStart(),e.dragImage=Object(a.d)("div").setStyle("position","absolute").setStyle("z-index","65530").toDOM(),document.body.appendChild(e.dragImage),e.dragImage.appendChild(n.cloneNode(!0)),t.renderer&&t.renderer(e.dragImage),e.dropEffect=i.None,e.updateCusror(e.dropEffect),e.updateImageClass(e.dropEffect),e.draggableItem={element:n,scope:t.scope,data:t.data},e.updateDragItemPosition(s);var l=new u(e.draggableItem,e.dragImage,s);l.dropEffect=e.dropEffect,t.onDragStart&&t.onDragStart(l),e.dropEffect!==l.dropEffect&&(e.dropEffect=l.dropEffect,e.updateImageClass(e.dropEffect)),document.addEventListener("mousemove",o,!0),document.addEventListener("touchmove",o,!0)},d=function(t){s&&t instanceof TouchEvent&&t.preventDefault(),e.mouseDownPosition=new l(t),n.addEventListener("mousemove",r),n.addEventListener("touchmove",r),document.addEventListener("mouseup",h),document.addEventListener("touchend",h)};n.addEventListener("mousedown",d),n.addEventListener("touchstart",d);var h=function(t){e.mouseDownPosition=null,n.removeEventListener("mousemove",r),n.removeEventListener("touchmove",r),document.removeEventListener("mousemove",o,!0),document.removeEventListener("touchmove",o,!0),e.draggableItem&&f(t)},f=function(n){try{if(e.containerDescriptorIndex>=0){var r=e.containerDescriptors[e.containerDescriptorIndex],o={element:r.element,scopes:r.scopes,data:r.data},a=new u(e.draggableItem,e.dragImage,n);try{o.scopes.indexOf(e.draggableItem.scope)>=0&&e.dropEffect===i.Allow&&(e.finishedSuccessfully=!0,r.onDrop&&r.onDrop(o,a))}finally{r.onDragLeave&&r.onDragLeave(o,a)}}}finally{try{var s=new u(e.draggableItem,e.dragImage,n);s.data.finishedSuccessfully=e.finishedSuccessfully,t.onDragEnd&&t.onDragEnd(s)}finally{e.draggableItem=null,e.dragImage&&e.dragImage.parentElement&&e.dragImage.parentElement.removeChild(e.dragImage),e.dragImage=null,e.finishedSuccessfully=!1,document.removeEventListener("mouseup",h),document.removeEventListener("touchend",h)}}}},t.prototype.registerDropContainer=function(t){if(!t.element)throw Error("Element in drop container is null or undefined");this.containerDescriptors.push(t)},t.prototype.removeDropContainer=function(t){var e=this.containerDescriptors.filter((function(e){return e===t||e.element==t}));if(e)for(var n=0,i=e;n<i.length;n++){var o=i[n];r.utils.removeArrayItem(this.containerDescriptors,o)}},t.prototype.mouseMoveDragListener=function(t){if(t instanceof MouseEvent&&t.preventDefault(),t.stopPropagation(),this.updateDragItemPosition(t),-1==this.containerDescriptorIndex){for(var e=0;e<this.containerDescriptors.length;e++){var n=this.containerDescriptors[e];if(this.detectDragEnterEvent(n.element,t)){this.containerDescriptorIndex=e;break}}this.containerDescriptorIndex>=0&&this.dragEnterEvent(t)}else{n=this.containerDescriptors[this.containerDescriptorIndex];this.detectDragLeaveEvent(n.element,t)&&(this.dragLeaveEvent(t),this.containerDescriptorIndex=-1)}if(this.containerDescriptorIndex>=0){var i={element:(n=this.containerDescriptors[this.containerDescriptorIndex]).element,scopes:n.scopes,data:n.data};if(i.scopes.indexOf(this.draggableItem.scope)>=0){var r=new u(this.draggableItem,this.dragImage,t);r.dropEffect=this.dropEffect,n.onDragOver&&n.onDragOver(i,r)}}},t.prototype.updateCusror=function(t){switch(t){case i.Allow:this.setCursorStyle(this.dragImage,"grabbing");break;case i.Forbid:this.setCursorStyle(this.dragImage,"no-drop");break;default:this.setCursorStyle(this.dragImage,"grabbing")}},t.prototype.updateImageClass=function(t){switch(this.dragImage.classList.remove(this.classPrefix+"-allow"),this.dragImage.classList.remove(this.classPrefix+"-forbid"),this.dragImage.classList.remove(this.classPrefix+"-none"),t){case i.Allow:this.dragImage.classList.add(this.classPrefix+"-allow");break;case i.None:this.dragImage.classList.add(this.classPrefix+"-none");break;case i.Forbid:this.dragImage.classList.add(this.classPrefix+"-forbid");break;default:this.dragImage.classList.add(this.classPrefix+"-none")}},t.prototype.setCursorStyle=function(t,e){if(t){t.style.cursor=e;for(var n=0;n<t.children.length;n++)this.setCursorStyle(t.children[n],e)}},t.prototype.updateDragItemPosition=function(t){if(this.dragImage){var e=new l(t);this.dragImage.style.top=e.y-this.dragImage.offsetHeight/2+"px",this.dragImage.style.left=e.x-this.dragImage.offsetWidth/2+"px"}},t.prototype.dragEnterEvent=function(t){var e=this.containerDescriptors[this.containerDescriptorIndex],n={element:e.element,scopes:e.scopes,data:e.data};if(n.scopes.indexOf(this.draggableItem.scope)>=0){var r=new u(this.draggableItem,this.dragImage,t);r.dropEffect=i.Allow,e.onDragEnter&&e.onDragEnter(n,r),this.dropEffect=r.dropEffect,this.updateCusror(this.dropEffect),this.updateImageClass(this.dropEffect)}else this.dropEffect!==i.Forbid&&(this.dropEffect=i.None,this.updateCusror(this.dropEffect),this.updateImageClass(this.dropEffect))},t.prototype.dragLeaveEvent=function(t){var e=this.containerDescriptors[this.containerDescriptorIndex],n={element:e.element,scopes:e.scopes,data:e.data};if(n.scopes.indexOf(this.draggableItem.scope)>=0){var r=new u(this.draggableItem,this.dragImage,t);r.dropEffect=i.None,e.onDragLeave&&e.onDragLeave(n,r),this.dropEffect=r.dropEffect,this.updateCusror(this.dropEffect),this.updateImageClass(this.dropEffect)}},t.prototype.detectDragEnterEvent=function(t,e){var n=Object(o.g)(t),i=new l(e);return!(i.y<n.y||i.y>n.y+t.offsetHeight)&&!(i.x<n.x||i.x>n.x+t.offsetWidth)},t.prototype.detectDragLeaveEvent=function(t,e){var n=Object(o.g)(t),i=new l(e);return!(i.y>n.y&&i.y<n.y+t.offsetHeight&&i.x>n.x&&i.x<n.x+t.offsetWidth)},t}(),d=new c},function(t,e,n){"use strict";function i(t,e){for(var n="",i=0;i<e;i++)n+=t;return n}function r(t){return t.split("").reverse().join("")}function o(t,e){return t&&t.lastIndexOf(e)==t.length-e.length}function a(t,e){var n=t;return null!=n&&n.length>0?("/"!=n.charAt(n.length-1)&&(n+="/"),n+=e):n=e,n}n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){function t(t,e){this.columns=t,this.values=e}return t.prototype.toArray=function(){return Array.from(this.values)},t.prototype.size=function(){return this.values.length},t.prototype.getValue=function(t){var e;if("string"==typeof t){if(void 0===(e=this.columns.getIndex(t)))throw new RangeError("No column with id '"+t+"'")}else e=t;if(e>=this.values.length)throw new RangeError("Out of range: "+e);return this.values[e]},t.prototype.setValue=function(t,e){var n;if("string"==typeof t){if(void 0===(n=this.columns.getIndex(t)))throw new RangeError("No column with id '"+t+"'")}else n=t;if(n>=this.values.length)throw new RangeError("Out of range: "+n);this.values[n]=e},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){function t(t,e){this.xhr=t,this.method=e.method,this.url=e.url,this.headers=e.headers,this.queryParams=e.queryParams,this.data=e.data}return t.prototype.setHeader=function(t,e){this.headers[t]=e},t.prototype.setQueryParam=function(t,e){this.queryParams[t]=e},t.prototype.getXMLHttpRequest=function(){return this.xhr},t.prototype.getResponseHeaders=function(){if(this.xhr.readyState==this.xhr.HEADERS_RECEIVED){for(var t={},e=0,n=this.xhr.getAllResponseHeaders().trim().split(/[\r\n]+/);e<n.length;e++){var i=n[e].split(": "),r=i.shift(),o=i.join(": ");t[r]=o}return t}return{}},t.prototype.open=function(){var t=this;if(this.xhr.readyState===this.xhr.UNSENT){var e=this.url;for(var n in this.queryParams&&Object.keys(this.queryParams).length>0&&(e+=encodeURI("?"+Object.keys(this.queryParams).map((function(e){return e+"="+t.queryParams[e]})).join("&"))),this.xhr.open(this.method,e,!0),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.headers)this.xhr.setRequestHeader(n,this.headers[n])}},t.prototype.abort=function(){this.xhr.abort()},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var i,r=n(2),o=n(3);!function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=3]="Right"}(i||(i={}));var a=function(t){if(!t)throw Error("Options are required");if(!t.id)throw Error("Field Id is required");if(!t.label)throw Error("Label is required");this.id=t.id,this.type=o.a.getIfDefined(t.type,r.a.String),this.label=t.label,this.originAttrId=t.originAttrId,this.isAggr=t.isAggr||!1,this.displayFormat=t.dfmt,this.style=t.style||{}},s=function(){function t(){this.items=[],this.mapper={},this._dateColumnIdx=[]}return Object.defineProperty(t.prototype,"count",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e;e=t instanceof a?t:new a(t);var n=this.items.length;return this.items.push(e),this.mapper[e.id]=n,[r.a.Date,r.a.DateTime,r.a.Time].indexOf(e.type)>=0&&this._dateColumnIdx.push(n),n},t.prototype.updateDateColumnIdx=function(){this._dateColumnIdx=this.getItems().filter((function(t){return[r.a.Date,r.a.DateTime,r.a.Time].indexOf(t.type)>=0})).map((function(t,e){return e}))},t.prototype.put=function(t,e){this.items[t]=e,this.updateDateColumnIdx()},t.prototype.move=function(t,e){var n=this.items.indexOf(t);n>=0&&n!=e&&(o.a.moveArrayItem(this.items,n,e),this.updateDateColumnIdx())},t.prototype.get=function(t){return this.items[t]},t.prototype.getIndex=function(t){return this.mapper[t]},t.prototype.getItems=function(){return this.items},t.prototype.getDateColumnIndexes=function(){return this._dateColumnIdx},t.prototype.removeAt=function(t){var e=this.get(t);this.items.splice(t,1);var n=this._dateColumnIdx.indexOf(t);n>=0&&this._dateColumnIdx.splice(n,1),delete this.mapper[e.id]},t.prototype.clear=function(){this.items=[],this._dateColumnIdx=[],this.mapper={}},t}()},function(module,__webpack_exports__,__webpack_require__){"use strict";var browserUtils;__webpack_require__.d(__webpack_exports__,"a",(function(){return browserUtils})),function(browserUtils){var _isFirefox=null,_isIE=null;function IsIE(){if(null===_isIE){var t=navigator.userAgent;_isIE=t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1}return _isIE}function IsEdge(){return!IsIE()&&eval("!!window.StyleMedia")}function IsFirefox(){if(null===_isFirefox){var t=navigator.userAgent;_isFirefox=t.toLowerCase().indexOf("firefox")>-1}return _isFirefox}browserUtils.IsIE=IsIE,browserUtils.IsEdge=IsEdge,browserUtils.IsFirefox=IsFirefox;var _detectedIsMobileMode=!1,_isMobileMode=void 0,detectIsMobileMode=function(){var t=isMobileMode();_detectedIsMobileMode=window.matchMedia("only screen and (max-width: 840px)").matches||window.matchMedia("only screen and (max-height: 420px)").matches;var e=isMobileMode();e!==t&&mobileModeChangeHandler&&mobileModeChangeHandler(e)},mobileModeChangeHandler;function isMobileMode(){return void 0!==_isMobileMode?_isMobileMode:_detectedIsMobileMode}function setIsMobileMode(t){var e=isMobileMode();_isMobileMode=t;var n=isMobileMode();n!==e&&mobileModeChangeHandler&&mobileModeChangeHandler(n)}function onMobileModeChanged(t){mobileModeChangeHandler=t}function getMobileCssClass(){return isMobileMode()?"k-mobile":null}detectIsMobileMode(),window.addEventListener("resize",(function(){return detectIsMobileMode()})),browserUtils.isMobileMode=isMobileMode,browserUtils.setIsMobileMode=setIsMobileMode,browserUtils.onMobileModeChanged=onMobileModeChanged,browserUtils.getMobileCssClass=getMobileCssClass}(browserUtils||(browserUtils={}))},function(t,e,n){"use strict";function i(t,e){var n={9:"[0-9]",a:"[a-z]"},i=e.split(""),r=function(e){if("focus"!==e.type||""===t.value){var r=[],o=t.selectionStart;i.forEach((function(e,i){if(n[e]){var o=new RegExp(n[e],"i").test(t.value.charAt(i));r.push(o?t.value.charAt(i):"_")}else r.push(e)})),t.value=r.join(""),t.selectionStart=t.selectionEnd=o}};t.addEventListener("keydown",(function(e){if(8===e.keyCode||46===e.keyCode){e.preventDefault();var r=[],o=t.selectionStart;if(0==o)return;for(var a=o,s=!0,u=i.length-1;u>=0;u--){var l=i[u];if(n[l]){var c=new RegExp(n[l],"i").test(t.value.charAt(u));c&&u!=o-1&&(s=!1),u===o-1&&a--,r.push(c&&u!=o-1?t.value.charAt(u):"_")}else u===a-1&&a--,o-1===u&&o--,r.push(l)}t.value=s?"":r.reverse().join(""),t.selectionStart=t.selectionEnd=a<0?0:a;var d=document.createEvent("Event");d.initEvent("input",!0,!0),t.dispatchEvent(d)}})),t.addEventListener("keypress",(function(e){var r=String.fromCharCode(e.charCode);if(r){e.preventDefault();var o=[],a=t.selectionStart,s=a;i.forEach((function(e,i){if(n[e]){var u=i!=a?t.value.charAt(i):r,l=new RegExp(n[e],"i").test(u);o.push(l?u:"_"),l&&a===i&&s++}else o.push(e),s===i&&s++,a===i&&a++})),t.value=o.join(""),t.selectionStart=t.selectionEnd=s;var u=document.createEvent("Event");u.initEvent("input",!0,!0),t.dispatchEvent(u)}})),t.addEventListener("input",r),t.addEventListener("focus",r)}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return l}));var i,r=n(0),o=n(1),a=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(){function e(){}return e.prototype.openConfirm=function(e,n,i){var r=this,o={title:e,closable:!1,submitable:!0,cancelable:!0,body:'<div id="kdlg-dialog-confirm">'+n+"</div>"};return i?(o.onSubmit=function(){i(!0)},o.onCancel=function(){i(!1)},void this.open(o)):new t((function(t){o.onSubmit=function(){t(!0)},o.onCancel=function(){t(!1)},r.open(o)}))},e.prototype.openPrompt=function(e,n,i,r){var o=this,a={title:e,submitable:!0,closable:!0,cancelable:!0,submitOnEnter:!0,body:'<div id="kdlg-dialog-form" class="kfrm-form">\n            <div class="kfrm-fields label-above">\n                <label for="kdlg-dialog-form-input" id="kdlg-dialog-form-content">'+n+'</label>\n                <input type="text" name="'+'kdlg-dialog-form-input" id="'+'kdlg-dialog-form-input" />\n            </div>\n        </div>',arrangeParents:!1,beforeOpen:function(){var t=document.getElementById("kdlg-dialog-form-input");i&&(t.value=i),t.focus()}},s=function(t){var e=document.getElementById("kdlg-dialog-form-input"),n=e.value;return n&&n.replace(/\s/g,"").length>0?(t(n),!0):(e.classList.add("eqjs-invalid"),!1)};return r?(a.onSubmit=function(){return s(r)},a.onCancel=function(){r("")},void this.open(a)):new t((function(t){a.onSubmit=function(){return s(t)},a.onCancel=function(){t("")},o.open(a)}))},e.prototype.open=function(t){var e=new u(t);return e.open(),e},e.prototype.openProgress=function(t){var e=new l(t);return e.open(),e},e}(),u=function(){function t(t){var e=this;this.options=t,this.submitHandler=function(){return(!e.options.onSubmit||!1!==e.options.onSubmit())&&(e.destroy(),!0)},this.cancelHandler=function(){e.options.onCancel&&e.options.onCancel(),e.destroy()},this.keydownHandler=function(t){return 13!=t.keyCode||!e.isActiveDialog()||(t.preventDefault(),t.stopPropagation(),!e.submitHandler())||(window.removeEventListener("keydown",e.keydownHandler,!1),!1)};var n=r.utils.generateId("dlg");this.slot=Object(o.d)("div",document.body).attr("tab-index","-1").data("dialog-id",n).addClass("kdlg-modal","is-active").addChild("div",(function(t){return t.addClass("kdlg-modal-background")})).addChild("div",(function(n){return e.windowElement=n.addClass("kdlg-modal-window").addChild("header",(function(n){e.headerElement=n.addClass("kdlg-header").addChild("p",(function(e){return e.addClass("kdlg-header-title").addText(t.title)})).toDOM(),!1!==t.closable&&n.addChild("button",(function(t){return t.addClass("kdlg-modal-close").on("click",(function(){e.cancelHandler()}))}))})).addChild("section",(function(n){e.bodyElement=n.addClass("kdlg-body").toDOM(),"string"==typeof t.body?n.addHtml(t.body):n.addChildElement(t.body)})).addChild("div",(function(t){return e.alertElement=t.addClass("kdlg-alert-container").toDOM()})).addChild("footer",(function(n){e.footerElement=n.addClass("kdlg-footer","align-right").toDOM(),!1!==t.submitable&&(n.addChild("button",(function(t){return t.addClass("kfrm-button","is-info").addText(r.i18n.getText("ButtonOK")).on("click",(function(t){e.submitHandler()}))})),!1!==t.cancelable&&n.addChild("button",(function(t){return t.addClass("kfrm-button").addText(r.i18n.getText("ButtonCancel")).on("click",(function(t){e.cancelHandler()}))})))})).toDOM()})).toDOM()}return t.prototype.getRootElement=function(){return this.slot},t.prototype.open=function(){this.options.beforeOpen&&this.options.beforeOpen(),Object(o.d)(this.slot).show(),this.options.arrangeParents&&this.arrangeParents(!0);var t=this.slot.querySelector(".kdlg-modal-window");this.options.height&&(t.style.height="string"==typeof this.options.height?this.options.height:this.options.height+"px"),this.options.width&&(t.style.width="string"==typeof this.options.width?this.options.width:this.options.width+"px"),this.options.submitOnEnter&&window.addEventListener("keydown",this.keydownHandler,!1)},t.prototype.submit=function(){this.submitHandler()},t.prototype.cancel=function(){this.cancelHandler()},t.prototype.close=function(){this.destroy()},t.prototype.disableButtons=function(){this.slot.querySelectorAll("button").forEach((function(t){return t.disabled=!0}))},t.prototype.enableButtons=function(){this.slot.querySelectorAll("button").forEach((function(t){return t.disabled=!1}))},t.prototype.showAlert=function(t,e,n){var i=Object(o.d)("div").addClass("kdlg-alert "+(e||"")).addChild("span",(function(t){return t.addClass("kdlg-alert-closebtn").text("×").on("click",(function(t){var e=t.target.parentElement;e.parentElement.removeChild(e)}))})).addText(t).toDOM();!0===n&&this.clearAlert(),this.alertElement.appendChild(i)},t.prototype.clearAlert=function(){this.alertElement.innerHTML=""},t.prototype.destroy=function(){this.options.arrangeParents&&this.arrangeParents(!1),document.body.removeChild(this.slot),this.options.submitOnEnter&&window.removeEventListener("keydown",this.keydownHandler,!1),this.options.onDestroy&&this.options.onDestroy()},t.prototype.isActiveDialog=function(){var t=document.documentElement.querySelectorAll(".kdlg-modal");return t[t.length-1]===this.slot},t.prototype.arrangeParents=function(t){for(var e=document.documentElement.querySelectorAll(".kdlg-modal-window"),n=0;n<e.length-1;n++)if(t){var i=0==n?20:40*n+20;Object(o.d)(e[n]).setStyle("margin-top",i+"px").setStyle("margin-left",i+"px")}else Object(o.d)(e[n]).removeStyle("margin-top").removeStyle("margin-left")},t}(),l=function(t){function e(e){var n,i,r=this,a=Object(o.d)("div").addChild("div",(function(t){return n=t.text(e.content||"").toDOM()})).addChild("div",(function(t){t.addClass("kdlg-progress-line").addChild("div",(function(t){i=t.addClass("fill").toDOM(),e.determinated?t.setStyle("width","0%"):t.addClass("indeterminate")}))})).toDOM();return(r=t.call(this,{title:e.title,body:a,beforeOpen:e.beforeOpen,onSubmit:e.onSubmit,width:e.width,height:e.height,submitable:!1,cancelable:!1,closable:!1})||this).contentElement=n,r.progressElement=i,r}return a(e,t),e.prototype.updateContent=function(t){this.contentElement.innerText=t},e.prototype.updateProgress=function(t){var e=this;t=this.in01(t),this.progressElement.style.width=100*t+"%",1===t&&setTimeout((function(){e.submit()}),500)},e.prototype.in01=function(t){return t>1?1:t<0?0:t},e}(u)}).call(this,n(24))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));var i=n(0),r=function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},o=function(){function e(t,e,n,i){void 0===i&&(i=!1),this.loader=t,this.sourceTable=e,this.entityId=n,this.isLookup=i,this.filterValue="",this.justServerSide=!1}return e.prototype.getValue=function(){return this.filterValue},e.prototype.apply=function(t){return this.filterValue=t,this.filterValue?this.applyCore():this.clear()},e.prototype.clear=function(){return this.filterValue="",t.resolve(this.sourceTable)},e.prototype.applyCore=function(){var t=this;if(this.sourceTable.getTotal()!=this.sourceTable.getCachedCount()||this.justServerSide){var e=[{class:"__substring",value:this.filterValue}];return this.loader.loadChunk({offset:0,limit:this.sourceTable.chunkSize,needTotal:!0,filters:e,entityId:this.entityId,lookup:this.isLookup}).then((function(n){for(var o=new i.EasyDataTable({chunkSize:t.sourceTable.chunkSize,loader:{loadChunk:function(n){return t.loader.loadChunk(r({},n,{filters:e,entityId:t.entityId,lookup:t.isLookup}))}}}),a=0,s=t.sourceTable.columns.getItems();a<s.length;a++){var u=s[a];o.columns.add(u)}o.setTotal(n.total);for(var l=0,c=n.table.getCachedRows();l<c.length;l++){var d=c[l];o.addRow(d)}return o}))}return this.applyInMemoryFilter()},e.prototype.applyInMemoryFilter=function(){var e=this;return new t((function(t,n){for(var r=new i.EasyDataTable({chunkSize:e.sourceTable.chunkSize}),o=0,a=e.sourceTable.columns.getItems();o<a.length;o++){var s=a[o];r.columns.add(s)}for(var u=e.filterValue.split("||").map((function(t){return t.trim().toLowerCase()})),l=function(t){for(var n=0,r=e.sourceTable.columns.getItems();n<r.length;n++){var o=r[n];if(i.utils.isIntType(o.type)||i.utils.getStringDataTypes().indexOf(o.type)>=0){var a=t.getValue(o.id);if(a)for(var s=a.toString().toLowerCase(),l=0,c=u;l<c.length;l++){var d=c[l];if(s.indexOf(d)>=0)return!0}}}return!1},c=0,d=e.sourceTable.getCachedRows();c<d.length;c++){var h=d[c];l(h)&&r.addRow(h)}0==r.getCachedCount()&&r.setTotal(0),t(r)}))},e}()}).call(this,n(32))},function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return d}));var i,r=n(3),o=n(25),a=n(8),s=n(12),u=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(){return(l=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},c=function(t){function e(e,n){var i=t.call(this,n)||this;return i.status=e,i}return u(e,t),e}(Error),d=function(){function e(){this.defaultHeaders={},this.customPayload=void 0}return e.prototype.get=function(t,e){return this.send(a.a.Get,t,null,e)},e.prototype.post=function(t,e,n){return this.send(a.a.Post,t,e,n)},e.prototype.put=function(t,e,n){return this.send(a.a.Put,t,e,n)},e.prototype.delete=function(t,e,n){return this.send(a.a.Delete,t,e,n)},e.prototype.send=function(e,n,i,a){var u=(a=a||{}).dataType||"json",d=a.contentType||"form-data"!==u?"application/json":null;i&&"form-data"!=u&&this.customPayload&&(i.data=r.a.assignDeep(i.data||{},this.customPayload));var h=new("onload"in new XMLHttpRequest?XMLHttpRequest:window.XDomainRequest),f={method:e,url:n,headers:l({},this.defaultHeaders,a.headers||{}),queryParams:a.queryParams||{},data:i};d&&(f.headers["Content-Type"]=d);var p=new s.a(h,f);this.beforeEachRequest&&(console.warn("HttpClient: 'beforeEachRequest' is deprecated and will be removed in future updates.\n            Use 'onRequest' instead"),this.beforeEachRequest(p)),this.onRequest&&this.onRequest(p);var g=p.data&&"string"!=typeof p.data&&"json"==u?JSON.stringify(p.data):p.data;return p.open(),new o.a(p,new t((function(t,e){a.responseType&&(h.responseType=a.responseType),h.onreadystatechange=function(){if(4==h.readyState){var i=h.getResponseHeader("Content-Type")||"",r=h.status;if(r>=300||r<200){var o=0==i.indexOf("application/json")?JSON.parse(h.responseText):h.responseText,a=o.message||(404==r?"No such endpoint: "+n:o);e(new c(r,a))}else{var s="arraybuffer"===h.responseType||"blob"===h.responseType?h.response:0==i.indexOf("application/json")?JSON.parse(h.responseText):h.responseText;t(s)}}},h.send(g)})))},e}()}).call(this,n(19))},function(t,e,n){(function(e,n){var i;i=function(){"use strict";function t(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,o=void 0,a=void 0,s=function(t,e){p[r]=t,p[r+1]=e,2===(r+=2)&&(a?a(g):w())},u="undefined"!=typeof window?window:void 0,l=u||{},c=l.MutationObserver||l.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(g,1)}}var p=new Array(1e3);function g(){for(var t=0;t<r;t+=2)(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0;r=0}var m,y,v,b,w=void 0;function E(t,e){var n=this,i=new this.constructor(T);void 0===i[D]&&L(i);var r=n._state;if(r){var o=arguments[r-1];s((function(){return A(r,i,o,n._result)}))}else k(n,i,t,e);return i}function C(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(T);return M(e,t),e}d?w=function(){return e.nextTick(g)}:c?(y=0,v=new c(g),b=document.createTextNode(""),v.observe(b,{characterData:!0}),w=function(){b.data=y=++y%2}):h?((m=new MessageChannel).port1.onmessage=g,w=function(){return m.port2.postMessage(0)}):w=void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(g)}:f()}catch(t){return f()}}():f();var D=Math.random().toString(36).substring(2);function T(){}var x=void 0;function I(e,n,i){n.constructor===e.constructor&&i===E&&n.constructor.resolve===C?function(t,e){1===e._state?S(t,e._result):2===e._state?_(t,e._result):k(e,void 0,(function(e){return M(t,e)}),(function(e){return _(t,e)}))}(e,n):void 0===i?S(e,n):t(i)?function(t,e,n){s((function(t){var i=!1,r=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(n,e,(function(n){i||(i=!0,e!==n?M(t,n):S(t,n))}),(function(e){i||(i=!0,_(t,e))}),t._label);!i&&r&&(i=!0,_(t,r))}),t)}(e,n,i):S(e,n)}function M(t,e){if(t===e)_(t,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof(i=e),null===i||"object"!==r&&"function"!==r)S(t,e);else{var n=void 0;try{n=e.then}catch(e){return void _(t,e)}I(t,e,n)}var i,r}function O(t){t._onerror&&t._onerror(t._result),P(t)}function S(t,e){t._state===x&&(t._result=e,t._state=1,0!==t._subscribers.length&&s(P,t))}function _(t,e){t._state===x&&(t._state=2,t._result=e,s(O,t))}function k(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+1]=n,r[o+2]=i,0===o&&t._state&&s(P,t)}function P(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,r=void 0,o=t._result,a=0;a<e.length;a+=3)i=e[a],r=e[a+n],i?A(n,i,r,o):r(o);t._subscribers.length=0}}function A(e,n,i,r){var o=t(i),a=void 0,s=void 0,u=!0;if(o){try{a=i(r)}catch(t){u=!1,s=t}if(n===a)return void _(n,new TypeError("A promises callback cannot return that same promise."))}else a=r;n._state!==x||(o&&u?M(n,a):!1===u?_(n,s):1===e?S(n,a):2===e&&_(n,a))}var R=0;function L(t){t[D]=R++,t._state=void 0,t._result=void 0,t._subscribers=[]}var j=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(T),this.promise[D]||L(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):_(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===C){var r=void 0,o=void 0,a=!1;try{r=t.then}catch(t){a=!0,o=t}if(r===E&&t._state!==x)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(n===N){var s=new n(T);a?_(s,o):I(s,t,r),this._willSettleAt(s,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(i(t),e)},t.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===x&&(this._remaining--,2===t?_(i,n):this._result[e]=n),0===this._remaining&&S(i,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;k(t,void 0,(function(t){return n._settledAt(1,e,t)}),(function(t){return n._settledAt(2,e,t)}))},t}(),N=function(){function e(t){this[D]=R++,this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){M(t,e)}),(function(e){_(t,e)}))}catch(e){_(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this,i=n.constructor;return t(e)?n.then((function(t){return i.resolve(e()).then((function(){return t}))}),(function(t){return i.resolve(e()).then((function(){throw t}))})):n.then(e,e)},e}();return N.prototype.then=E,N.all=function(t){return new j(this,t).promise},N.race=function(t){var e=this;return i(t)?new e((function(n,i){for(var r=t.length,o=0;o<r;o++)e.resolve(t[o]).then(n,i)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},N.resolve=C,N.reject=function(t){var e=new this(T);return _(e,t),e},N._setScheduler=function(t){a=t},N._setAsap=function(t){s=t},N._asap=s,N.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=N},N.Promise=N,N},t.exports=i()}).call(this,n(20),n(21))},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var u,l=[],c=!1,d=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):d=-1,l.length&&f())}function f(){if(!c){var t=s(h);c=!0;for(var e=l.length;e;){for(u=l,l=[];++d<e;)u&&u[d].run();d=-1,e=l.length}u=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));var i=n(13),r=n(11),o=function(){function e(t){if(this._chunkSize=1e3,this.chunkMap={},this.total=0,this.loader=null,this.needTotal=!0,t=t||{},this._chunkSize=t.chunkSize||this._chunkSize,this.loader=t.loader,this._columns=new i.c,t.columns)for(var e=0,n=t.columns;e<n.length;e++){var r=n[e];this._columns.add(r)}if(t.rows)for(var o=0,a=t.rows;o<a.length;o++){var s=a[o],u=this.createRow(s);this.addRow(u)}}return Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chunkSize",{get:function(){return this._chunkSize},set:function(t){this._chunkSize=t,this.total=0,this.needTotal=!0,this.chunkMap={}},enumerable:!0,configurable:!0}),e.prototype.getRows=function(e){var n=this,i=0,r=this._chunkSize;e&&("page"in e?(i=e.pageSize*(e.page-1),r=e.pageSize):(i=e.offset,r=e.limit));var o=i+r;if(!this.needTotal){if(i>=this.total)return t.resolve([]);o>this.total&&(o=this.total)}for(var a=Math.trunc(i/this._chunkSize),s=Math.trunc((o-1)/this._chunkSize),u=!0,l=a;l<=s;l++)if(!this.chunkMap[l]){u=!1;break}if(u){var c=[];for(l=a;l<=s;l++)c=c.concat(this.chunkMap[l].rows);var d=this.chunkMap[a].offset;return t.resolve(c.slice(i-d,o-d))}if(!this.loader)throw"Loader is not defined. Can't get the rows from "+i+" to "+o;var h=this.needTotal;return this.needTotal&&(this.needTotal=!1),this.loader.loadChunk({offset:a*this._chunkSize,limit:this._chunkSize*(s-a+1),needTotal:h}).then((function(t){var e=t.table.getCachedChunks();h&&(n.total=t.total,o>n.total&&(o=n.total));for(var r=a,u=0,l=e;u<l.length;u++){var c=l[u];n.chunkMap[r]={offset:r*n._chunkSize,rows:c.rows},r++}for(var d=[],f=a;f<=s;f++)d=d.concat(n.chunkMap[f].rows);var p=n.chunkMap[a].offset;return d.slice(i-p,o-p)}))},e.prototype.getRow=function(t){return this.getRows({offset:t,limit:1}).then((function(t){return t.length>0?t[0]:null}))},e.prototype.getTotal=function(){return this.total},e.prototype.setTotal=function(t){this.total=t,this.needTotal=!1,this.chunkMap={}},e.prototype.getCachedCount=function(){return this.getCachedRows().length},e.prototype.clear=function(){this.columns.clear(),this.chunkMap={},this.total=0,this.needTotal=!0},e.prototype.createRow=function(t){var e=this,n=this._columns.getDateColumnIndexes(),i=new Array(this._columns.count),o=t instanceof r.a?function(e){return t.getValue(e)}:function(e){return t[e]};return t&&this.columns.getItems().forEach((function(t){var r=o(t.id),a=e.columns.getIndex(t.id);i[a]=n.indexOf(a)>=0&&r?new Date(r):r})),new r.a(this._columns,i)},e.prototype.addRow=function(t){var e;if(Array.isArray(t)){var n=this._columns.getDateColumnIndexes();if(n.length>0)for(var i=0,o=n;i<o.length;i++){var a=o[i];t[a]&&(t[a]=new Date(t[a]))}e=new r.a(this._columns,t)}else e=this.createRow(t);var s=this.getLastChunk();(!s||s.rows.length>=this._chunkSize)&&(s=this.createChunk()),s.rows.push(e);var u=this.getCachedCount();return u>this.total&&(this.total=u),e},e.prototype.createChunk=function(t){void 0===t&&(t=this.getLastChunkIndex()+1);var e={offset:t*this._chunkSize,rows:[]};return this.chunkMap[t]=e,e},e.prototype.getLastChunkIndex=function(){var t=Object.keys(this.chunkMap);return t.length>0?parseInt(t[t.length-1]):-1},e.prototype.getLastChunk=function(){var t=this.getLastChunkIndex();return t>-1?this.chunkMap[t]:null},e.prototype.getCachedRows=function(){return this.getCachedChunks().reduce((function(t,e){return t.concat(e.rows)}),[])},e.prototype.getCachedChunks=function(){return Object.values(this.chunkMap)},e}()}).call(this,n(19))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return c}));var i=n(0),r=n(9),o=n(1),a=n(5),s=n(6),u=n(7),l=function(){return(l=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},c=function(){function e(t){if(this.cssPrefix="keg",this.pagination={page:1,pageSize:30,total:0},this.paginationOptions={maxButtonCount:10,useBootstrap:!1},this.defaultDataGridOptions={slot:null,dataTable:null,fixHeightOnFirstRender:!1,syncGridColumns:!0,useRowNumeration:!0,allowDragDrop:!1,totals:{calcGrandTotals:!1,calculator:null},paging:{enabled:!0,pageSize:30},addColumns:!1,viewportRowsCount:null,showActiveRow:!0},this.rowsOnPagePromise=null,this.containerInitialHeight=0,this.firstRender=!0,this.prevRowTotals=null,this.landingIndex=-1,this.landingSlot=Object(o.d)("div").addClass(this.cssPrefix+"-col-landing-slot").addChildElement(Object(o.d)("div").toDOM()).toDOM(),this._activeRowIndex=-1,t&&t.paging&&(t.paging=i.utils.assign(this.defaultDataGridOptions.paging,t.paging)),this.options=l({},this.defaultDataGridOptions,t),!this.options.slot)throw Error('"slot" parameter is required to initialize EasyDataGrid');if(!this.options.dataTable)throw Error('"dataTable" parameter is required to initialize EasyDataGrid');this.dataTable=t.dataTable,this.eventEmitter=new i.EventEmitter(this),this.cellRendererStore=new u.b(t),this.columns=new s.c(this.dataTable.columns,this),this.setSlot(this.options.slot),this.init(this.options)}return e.prototype.setSlot=function(t){if("string"==typeof t){if(t.length)if("#"===t[0])this.slot=document.getElementById(t.substring(1));else{if("."!==t[0])throw Error("Unrecognized slot parameter (Must be id, class or HTMLElement): "+t);var e=document.getElementsByClassName(t.substring(1));e.length&&(this.slot=e[0])}}else this.slot=t},e.prototype.init=function(t){var e=this;t.onInit&&this.addEventListener("init",t.onInit),t.onRowClick&&this.addEventListener("rowClick",t.onRowClick),t.onRowDbClick&&this.addEventListener("rowDbClick",t.onRowDbClick),t.onAddColumnClick&&this.addEventListener("addColumnClick",t.onAddColumnClick),t.onColumnChanged&&this.addEventListener("columnChanged",t.onColumnChanged),t.onColumnDeleted&&this.addEventListener("columnDeleted",t.onColumnDeleted),t.onColumnMoved&&this.addEventListener("columnMoved",t.onColumnMoved),t.onPageChanged&&this.addEventListener("pageChanged",t.onPageChanged),t.onActiveRowChanged&&this.addEventListener("activeRowChanged",t.onActiveRowChanged),this.addEventListener("pageChanged",(function(t){return e.activeRowIndex=-1})),i.utils.assignDeep(this.paginationOptions,t.pagination),this.pagination.pageSize=this.options.paging.pageSize||this.pagination.pageSize,this.options.allowDragDrop&&r.d.registerDropContainer({element:this.slot,scopes:["gridColumnMove"],onDragEnter:function(t,n){e.slot.classList.add(a.e+"-drophover"),e.showLandingSlot(n.pageX,n.pageY)},onDragOver:function(t,n){e.showLandingSlot(n.pageX,n.pageY)},onDragLeave:function(t,n){n.dropEffect=r.b.Forbid,e.slot.classList.remove(a.e+"-drophover"),e.hideLandingSlot()},onDrop:function(t,n){e.dataTable.columns.move(n.data.column,e.landingIndex),e.refresh(),e.fireEvent({type:"columnMoved",columnId:n.data.column.id,newIndex:e.landingIndex})}}),this.refresh(),this.fireEvent("init")},e.prototype.fireEvent=function(t){"string"==typeof t?this.eventEmitter.fire(t):this.eventEmitter.fire(t.type,t)},e.prototype.setData=function(t){this.dataTable=t,this.clear(),this.refresh()},e.prototype.getData=function(){return this.dataTable},e.prototype.getColumns=function(){return this.columns},e.prototype.destroy=function(){this.slot.innerHTML=""},e.prototype.refresh=function(){this.clearDOM(),this.render()},e.prototype.clearDOM=function(){this.slot.innerHTML=""},e.prototype.clear=function(){this.pagination.page=1,this.clearDOM()},e.prototype.render=function(){var t=this;if(this.hasData()||this.options.addColumns){this.containerInitialHeight=this.slot.clientHeight,this.rootDiv=document.createElement("div"),this.rootDiv.style.width="100%",this.rootDiv.classList.add(this.cssPrefix+"-root"),this.columns.sync(this.dataTable.columns,this.options.useRowNumeration),this.renderHeader(),this.rootDiv.appendChild(this.headerDiv),this.renderBody(),this.rootDiv.appendChild(this.bodyDiv),this.renderFooter(),this.rootDiv.appendChild(this.footerDiv);var e=document.createElement("div");e.classList.add(this.cssPrefix+"-container"),e.appendChild(this.rootDiv),this.slot.appendChild(e),this.rowsOnPagePromise?this.rowsOnPagePromise.then((function(){return t.updateHeight()})).then((function(){t.firstRender=!1,t.rowsOnPagePromise=null})):setTimeout((function(){t.updateHeight(),t.firstRender=!1}),100)}},e.prototype.updateHeight=function(){var e=this;return new t((function(t){if(e.options.viewportRowsCount){var n=e.bodyCellContainerDiv.firstElementChild,i=(n?n.offsetHeight:36)*e.options.viewportRowsCount;return Object(o.d)(e.bodyDiv).setStyle("height",i+"px"),void setTimeout((function(){var n=e.bodyViewportDiv.offsetHeight-e.bodyViewportDiv.clientHeight;i+=n,Object(o.d)(e.bodyDiv).setStyle("height",i+"px"),t()}),100)}e.containerInitialHeight,t()})).then((function(){e.options.fixHeightOnFirstRender&&e.firstRender&&(e.slot.style.height=e.slot.offsetHeight+"px")}))},e.prototype.renderHeader=function(){var t=this;this.headerDiv=Object(o.d)("div").addClass(this.cssPrefix+"-header").toDOM(),this.headerViewportDiv=Object(o.d)("div",this.headerDiv).addClass(this.cssPrefix+"-header-viewport").toDOM(),this.headerCellContainerDiv=Object(o.d)("div",this.headerViewportDiv).addClass(this.cssPrefix+"-header-cell-container").toDOM(),this.headerRowDiv=Object(o.d)("div",this.headerCellContainerDiv).addClass(this.cssPrefix+"-header-row").toDOM(),this.columns.getItems().forEach((function(e,n){if(e.isVisible){var i=t.renderColumnHeader(e,n);t.headerRowDiv.appendChild(i),e.isRowNum&&Object(o.d)(i).addChildElement(t.renderAddColumnButton())}}));var e=this.columns.getItems().map((function(t){return t.width})).reduce((function(t,e){return t+e}));Object(o.d)(this.headerCellContainerDiv).setStyle("width",e+"px")},e.prototype.hasData=function(){return this.dataTable.columns.count>0},e.prototype.renderColumnHeader=function(t,e){var n=this,i=Object(o.d)("div").addClass(this.cssPrefix+"-header-cell").data("col-idx",""+(e+1)).setStyle("width",t.width+"px");t.dataColumn&&i.data("col-id",""+t.dataColumn.id);var a=i.toDOM();return Object(o.d)("div",a).addClass(this.cssPrefix+"-header-cell-resize"),t.isRowNum||Object(o.d)("div",a).addClass(this.cssPrefix+"-header-cell-label").text(t.label),this.options.allowDragDrop&&r.d.registerDraggableItem({element:a,scope:"gridColumnMove",data:{column:t},renderer:function(e){e.innerHTML="";var i=document.createElement("div");i.innerText=t.label,e.classList.add(n.cssPrefix+"-sortable-helper"),e.appendChild(i)},onDragStart:function(t){t.dropEffect=r.b.Allow}}),a},e.prototype.renderBody=function(){var t=this;this.bodyDiv=Object(o.d)("div").addClass(this.cssPrefix+"-body").toDOM(),this.bodyViewportDiv=Object(o.d)("div",this.bodyDiv).addClass(this.cssPrefix+"-body-viewport").attr("tabIndex","0").toDOM(),this.bodyCellContainerDiv=Object(o.d)("div",this.bodyViewportDiv).addClass(this.cssPrefix+"-cell-container").toDOM(),this.dataTable&&(this.showProgress(),this.rowsOnPagePromise=this.getRowsToRender().then((function(e){if(t.hideProgress(),t.bodyCellContainerDiv.innerHTML="",t.prevRowTotals=null,e.length){var n=t.calcTotals(),r=t.getTotalsKeyCols();e.forEach((function(e,i){n&&t.updateTotalsState(r,e);var o=t.renderRow(e,i);t.bodyCellContainerDiv.appendChild(o)}));var a=t.options.totals&&t.options.totals.showGrandTotalsOnEachPage;if(n&&(t.isLastPage()||a)){var s=new i.DataRow(t.dataTable.columns,new Array(t.dataTable.columns.count));t.updateTotalsState(r,s,!0)}}var u=t.columns.getItems().map((function(t){return t.width})).reduce((function(t,e){return t+e}));return Object(o.d)(t.bodyCellContainerDiv).setStyle("width",u+"px"),e.length})).catch((function(t){return console.error(t),0}))),this.bodyViewportDiv.addEventListener("scroll",(function(e){Object(o.d)(t.headerViewportDiv).setStyle("margin-left","-"+t.bodyViewportDiv.scrollLeft+"px")})),this.bodyViewportDiv.addEventListener("keydown",this.onVieportKeydown.bind(this))},e.prototype.isLastPage=function(){return this.pagination.page*this.pagination.pageSize>=this.pagination.total},e.prototype.calcTotals=function(){return this.options.totals&&(this.options.totals.calcGrandTotals||this.calcSubTotalsCols())&&this.dataTable.columns.getItems().filter((function(t){return t.isAggr})).length>0},e.prototype.calcSubTotalsCols=function(){return this.options.totals.cols&&Object.values(this.options.totals.cols).map((function(t){return t.calcSubTotals})).reduce((function(t,e){return t||e}),!1)},e.prototype.getTotalsKeyCols=function(){var t=this.dataTable.columns.getItems().filter((function(t){return!t.isAggr}));return t.pop(),t},e.prototype.updateTotalsState=function(t,e,n){if(void 0===n&&(n=!1),this.prevRowTotals&&this.calcSubTotalsCols()){for(var r=-1,o=0;o<t.length;o++){var a=t[o];if(this.prevRowTotals.getValue(a.id)!==e.getValue(a.id)){r=o;break}}if(-1!=r){var s=this.options.totals;for(o=t.length;o>r;o--){a=t[o-1];var u=s.cols?s.cols[a.id]:null;if(u&&u.calcSubTotals){var l=new i.DataRow(this.dataTable.columns,this.prevRowTotals.toArray()),c=this.renderTotalsRow(o,l);this.bodyCellContainerDiv.appendChild(c)}}}}if(n&&this.options.totals.calcGrandTotals){c=this.renderTotalsRow(0,e);this.bodyCellContainerDiv.appendChild(c)}this.prevRowTotals=e},e.prototype.renderTotalsRow=function(t,e){var n=this,i=Object(o.d)("div").addClass(this.cssPrefix+"-row").addClass(this.cssPrefix+"-row-totals").addClass(this.cssPrefix+"-totals-lv"+t).data("totals-level",""+t).attr("tabindex","-1").toDOM();return this.columns.getItems().forEach((function(e,r){if(e.isVisible){var o=e.isRowNum?-1:n.dataTable.columns.getIndex(e.dataColumn.id),a=o==t||0==t&&0==o?n.getTotalsTitle(t):"";o==n.dataTable.columns.count-1&&(a="Calculating..."),i.appendChild(n.renderCell(e,o,a,i))}})),this.options.totals.calculator.getTotals().fillTotals(t,e).then((function(){i.innerHTML="",n.columns.getItems().forEach((function(r,o){if(r.isVisible){var a=r.isRowNum?-1:n.dataTable.columns.getIndex(r.dataColumn.id),s=a==t||0==t&&0==a?n.getTotalsTitle(t):"";!r.isRowNum&&r.dataColumn.isAggr&&(s=e.getValue(a)),i.appendChild(n.renderCell(r,a,s,i))}}))})).catch((function(t){return console.error(t)})),i},e.prototype.getTotalsTitle=function(t){return t?"Sub totals: ":"Grand totals: "},e.prototype.onVieportKeydown=function(t){if(this.options.showActiveRow){var e=this.bodyCellContainerDiv.querySelectorAll("."+this.cssPrefix+"-row").length,n=void 0;switch(t.key){case"ArrowLeft":case"ArrowRight":break;case"ArrowUp":t.preventDefault(),n=this.activeRowIndex<0||this.activeRowIndex>=e?e-1:this.activeRowIndex-1,this.activeRowIndex=n>=0?n:0;break;case"ArrowDown":t.preventDefault(),n=this.activeRowIndex<0||this.activeRowIndex>=e?0:this.activeRowIndex+1,this.activeRowIndex=n<e?n:e-1}}},e.prototype.ensureRowVisibility=function(t){var e="number"==typeof t?this.getDataRow(t):t;if(e){var n=e.getBoundingClientRect(),i=this.bodyViewportDiv.getBoundingClientRect(),r=n.top-i.top,o=n.bottom-i.top,a=this.bodyViewportDiv.clientHeight,s=window.innerHeight||document.documentElement.clientHeight;if(r>0&&o<=a&&n.top>0&&n.bottom<s)return;r<0?this.bodyViewportDiv.scrollTop=this.bodyViewportDiv.scrollTop+r:o>a&&(this.bodyViewportDiv.scrollTop=this.bodyViewportDiv.scrollTop+o-a),(n=e.getBoundingClientRect()).top<0?document.documentElement.scrollTop=document.documentElement.scrollTop+n.top:n.bottom>s&&(document.documentElement.scrollTop=document.documentElement.scrollTop+n.bottom-s)}},e.prototype.getRowsToRender=function(){return!1===this.options.paging.enabled?t.resolve(this.dataTable.getCachedRows()):this.dataTable.getRows({page:this.pagination.page,pageSize:this.pagination.pageSize}).catch((function(t){return console.error(t),[]}))},e.prototype.renderFooter=function(){this.footerDiv=Object(o.d)("div").addClass(this.cssPrefix+"-footer").toDOM(),this.footerPaginateDiv=this.renderPageNavigator(),this.footerDiv.appendChild(this.footerPaginateDiv);var t=this.renderPageInfoBlock();this.footerDiv.appendChild(t)},e.prototype.renderPageInfoBlock=function(){var t=this,e=Object(o.d)("div").addClass(this.cssPrefix+"-page-info").toDOM();return this.rowsOnPagePromise&&this.rowsOnPagePromise.then((function(n){var r=n?(t.pagination.page-1)*t.pagination.pageSize+1:0,o=n?r+n-1:0,a=t.dataTable.getTotal();e.innerHTML=i.i18n.getText("GridPageInfo").replace("{FirstPageRecordNum}","<span>"+r.toString()+"</span>").replace("{LastPageRecordNum}","<span>"+o.toString()+"</span>").replace("{Total}","<span>"+a.toString()+"</span>")})),e},e.prototype.showProgress=function(){},e.prototype.hideProgress=function(){},e.prototype.getLocalIndexByGlobal=function(t){return this.pagination?t%this.pagination.pageSize:t},e.prototype.getGlobalIndexByLocal=function(t){return this.pagination?(this.pagination.page-1)*this.pagination.pageSize+t:t},e.prototype.renderRow=function(t,e){var n=this,i=this.getGlobalIndexByLocal(e),r=Object(o.d)("div").addClass(this.cssPrefix+"-row").addClass(this.cssPrefix+"-row-"+(e%2==1?"odd":"even")).data("row-idx",""+i).attr("tabindex","-1").on("click",(function(i){n.activeRowIndex=e,n.fireEvent({type:"rowClick",row:t,rowIndex:e,sourceEvent:i})})).on("dblclick",(function(i){n.fireEvent({type:"rowDbClick",row:t,rowIndex:e,sourceEvent:i})}));0==e&&r.addClass(this.cssPrefix+"-row-first");var a=r.toDOM();return this.options.showActiveRow&&e==this.activeRowIndex&&r.addClass(this.cssPrefix+"-row-active"),this.columns.getItems().forEach((function(e){if(e.isVisible){var r=e.isRowNum?-1:n.dataTable.columns.getIndex(e.dataColumn.id),o=e.isRowNum?i+1:t.getValue(r);a.appendChild(n.renderCell(e,r,o,a))}})),a},e.prototype.renderCell=function(t,e,n,i){var r=Object(o.d)("div").addClass(this.cssPrefix+"-cell").data("col-idx",""+e).attr("tabindex","-1").setStyle("width",t.width+"px");return t.align==s.b.LEFT?r.addClass(this.cssPrefix+"-cell-align-left"):t.align==s.b.RIGHT?r.addClass(this.cssPrefix+"-cell-align-right"):t.align==s.b.CENTER&&r.addClass(this.cssPrefix+"-cell-align-center"),t.cellRenderer&&t.cellRenderer(n,t,r.toDOM(),i),r.toDOM()},e.prototype.renderPageNavigator=function(){var t=this,e=document.createElement("div");if(e.className=this.cssPrefix+"-pagination-wrapper",this.pagination.total=this.dataTable.getTotal(),this.options.paging&&this.options.paging.enabled&&this.pagination.total>this.pagination.pageSize){var n=this.paginationOptions.useBootstrap?"":this.cssPrefix+"-";e.innerHTML="";var i=this.pagination.page||1,r=Math.ceil(this.pagination.total/this.pagination.pageSize)||1,o=function(e){var n=e.target;if(n.hasAttribute("data-page")){var i=parseInt(n.getAttribute("data-page"));t.pagination.page=i,t.fireEvent({type:"pageChanged",page:i}),t.refresh(),t.bodyViewportDiv.focus()}},a=this.paginationOptions.maxButtonCount||10,s=i-1,u=s-s%a+1,l=u+a-1;l>r&&(l=r);var c=document.createElement("ul");c.className=n+"pagination";var d=document.createElement("li");d.className=n+"page-item";var h=document.createElement("span");if(h.setAttribute("aria-hidden","true"),h.className=n+"page-link",1==u)d.className+=" disabled";else{if(this.paginationOptions.useBootstrap)(h=document.createElement("a")).setAttribute("href","javascript:void(0)"),h.setAttribute("data-page",""+(u-1));else(p=document.createElement("a")).setAttribute("href","javascript:void(0)"),p.setAttribute("data-page",""+(u-1)),h=p;h.className=n+"page-link",h.addEventListener("click",o)}h.innerHTML="&laquo;",d.appendChild(h),c.appendChild(d);for(var f=u;f<=l;f++)(d=document.createElement("li")).className=n+"page-item",f==i&&(d.className+=" active"),(h=document.createElement("a")).setAttribute("href","javascript:void(0)"),h.innerHTML=f.toString(),h.setAttribute("data-page",f.toString()),h.className=n+"page-link",h.addEventListener("click",o),d.appendChild(h),c.appendChild(d);if((d=document.createElement("li")).className=n+"page-item",(h=document.createElement("span")).setAttribute("aria-hidden","true"),h.className=n+"page-link",l==r)d.className+=" disabled";else{var p;if(this.paginationOptions.useBootstrap)(h=document.createElement("a")).setAttribute("href","javascript:void(0)"),h.setAttribute("data-page",""+(l+1));else(p=document.createElement("a")).setAttribute("href","javascript:void(0)"),p.setAttribute("data-page",""+(l+1)),h=p;h.className=n+"page-link",h.addEventListener("click",o)}h.innerHTML="&raquo;",d.appendChild(h),c.appendChild(d),e.appendChild(c)}return e},e.prototype.addEventListener=function(t,e){return this.eventEmitter.subscribe(t,(function(t){return e(t.data)}))},e.prototype.removeEventListener=function(t,e){this.eventEmitter.unsubscribe(t,e)},e.prototype.renderAddColumnButton=function(){var t=this;return this.options.addColumns?Object(o.d)("div").addClass(this.cssPrefix+"-addrow").title(this.options.addColumnsTitle||"Add column").addChild("a",(function(e){return e.attr("href","javascript:void(0)").on("click",(function(e){e.preventDefault(),t.fireEvent({type:"addColumnClick",sourceEvent:e})}))})).toDOM():Object(o.d)("span").addText("#").toDOM()},e.prototype.showLandingSlot=function(t,e){for(var n=this.headerRowDiv.querySelectorAll("[class*="+this.cssPrefix+"-table-col]"),i=[],r=1;r<n.length;r++){var o=n[r];"none"!==o.style.display&&i.push(o)}if(0===i.length)return this.landingIndex=0,void this.headerRowDiv.appendChild(this.landingSlot);var s=Object(a.g)(this.landingSlot);if(!(t>=s.x&&t<=s.x+this.landingSlot.offsetWidth)){for(var u=this.landingIndex,l=0,c=i;l<c.length;l++){var d=c[l],h=Object(a.g)(d),f=d.offsetWidth;t>h.x&&t<h.x+f&&(u=parseInt(d.getAttribute("data-col-idx"))-1)}u!=this.landingIndex&&(this.landingIndex=u,this.landingIndex<i.length?this.headerRowDiv.insertBefore(this.landingSlot,i[this.landingIndex]):this.headerRowDiv.appendChild(this.landingSlot))}},e.prototype.hideLandingSlot=function(){var t=this;this.landingIndex=-1,setTimeout((function(){t.landingSlot.parentElement&&t.landingSlot.parentElement.removeChild(t.landingSlot)}),10)},Object.defineProperty(e.prototype,"activeRowIndex",{get:function(){return this._activeRowIndex},set:function(t){if(t!==this._activeRowIndex){var e=this._activeRowIndex;this._activeRowIndex=t,this.updateActiveRow(),this.fireEvent({type:"activeRowChanged",oldValue:e,newValue:this.activeRowIndex,rowIndex:this.getGlobalIndexByLocal(this.activeRowIndex)})}},enumerable:!0,configurable:!0}),e.prototype.updateActiveRow=function(){var t=this;if(this.options.showActiveRow){this.bodyCellContainerDiv.querySelectorAll("[class*="+this.cssPrefix+"-row-active]").forEach((function(e){e.classList.remove(t.cssPrefix+"-row-active")}));var e=this.getActiveRow();e&&(e.classList.add(this.cssPrefix+"-row-active"),this.ensureRowVisibility(this.activeRowIndex))}},e.prototype.getActiveRow=function(){return this.getDataRow(this.activeRowIndex)},e.prototype.getDataRow=function(t){var e=Array.from(this.bodyCellContainerDiv.querySelectorAll("."+this.cssPrefix+"-row:not(."+this.cssPrefix+"-row-totals)"));return t>=0&&t<e.length?e[t]:null},e.prototype.focus=function(){this.bodyViewportDiv.focus()},e}()}).call(this,n(24))},function(t,e,n){(function(e,n){var i;i=function(){"use strict";function t(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,o=void 0,a=void 0,s=function(t,e){p[r]=t,p[r+1]=e,2===(r+=2)&&(a?a(g):w())},u="undefined"!=typeof window?window:void 0,l=u||{},c=l.MutationObserver||l.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(g,1)}}var p=new Array(1e3);function g(){for(var t=0;t<r;t+=2)(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0;r=0}var m,y,v,b,w=void 0;function E(t,e){var n=this,i=new this.constructor(T);void 0===i[D]&&L(i);var r=n._state;if(r){var o=arguments[r-1];s((function(){return A(r,i,o,n._result)}))}else k(n,i,t,e);return i}function C(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(T);return M(e,t),e}d?w=function(){return e.nextTick(g)}:c?(y=0,v=new c(g),b=document.createTextNode(""),v.observe(b,{characterData:!0}),w=function(){b.data=y=++y%2}):h?((m=new MessageChannel).port1.onmessage=g,w=function(){return m.port2.postMessage(0)}):w=void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(g)}:f()}catch(t){return f()}}():f();var D=Math.random().toString(36).substring(2);function T(){}var x=void 0;function I(e,n,i){n.constructor===e.constructor&&i===E&&n.constructor.resolve===C?function(t,e){1===e._state?S(t,e._result):2===e._state?_(t,e._result):k(e,void 0,(function(e){return M(t,e)}),(function(e){return _(t,e)}))}(e,n):void 0===i?S(e,n):t(i)?function(t,e,n){s((function(t){var i=!1,r=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(n,e,(function(n){i||(i=!0,e!==n?M(t,n):S(t,n))}),(function(e){i||(i=!0,_(t,e))}),t._label);!i&&r&&(i=!0,_(t,r))}),t)}(e,n,i):S(e,n)}function M(t,e){if(t===e)_(t,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof(i=e),null===i||"object"!==r&&"function"!==r)S(t,e);else{var n=void 0;try{n=e.then}catch(e){return void _(t,e)}I(t,e,n)}var i,r}function O(t){t._onerror&&t._onerror(t._result),P(t)}function S(t,e){t._state===x&&(t._result=e,t._state=1,0!==t._subscribers.length&&s(P,t))}function _(t,e){t._state===x&&(t._state=2,t._result=e,s(O,t))}function k(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+1]=n,r[o+2]=i,0===o&&t._state&&s(P,t)}function P(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,r=void 0,o=t._result,a=0;a<e.length;a+=3)i=e[a],r=e[a+n],i?A(n,i,r,o):r(o);t._subscribers.length=0}}function A(e,n,i,r){var o=t(i),a=void 0,s=void 0,u=!0;if(o){try{a=i(r)}catch(t){u=!1,s=t}if(n===a)return void _(n,new TypeError("A promises callback cannot return that same promise."))}else a=r;n._state!==x||(o&&u?M(n,a):!1===u?_(n,s):1===e?S(n,a):2===e&&_(n,a))}var R=0;function L(t){t[D]=R++,t._state=void 0,t._result=void 0,t._subscribers=[]}var j=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(T),this.promise[D]||L(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):_(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===C){var r=void 0,o=void 0,a=!1;try{r=t.then}catch(t){a=!0,o=t}if(r===E&&t._state!==x)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(n===N){var s=new n(T);a?_(s,o):I(s,t,r),this._willSettleAt(s,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(i(t),e)},t.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===x&&(this._remaining--,2===t?_(i,n):this._result[e]=n),0===this._remaining&&S(i,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;k(t,void 0,(function(t){return n._settledAt(1,e,t)}),(function(t){return n._settledAt(2,e,t)}))},t}(),N=function(){function e(t){this[D]=R++,this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){M(t,e)}),(function(e){_(t,e)}))}catch(e){_(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this,i=n.constructor;return t(e)?n.then((function(t){return i.resolve(e()).then((function(){return t}))}),(function(t){return i.resolve(e()).then((function(){throw t}))})):n.then(e,e)},e}();return N.prototype.then=E,N.all=function(t){return new j(this,t).promise},N.race=function(t){var e=this;return i(t)?new e((function(n,i){for(var r=t.length,o=0;o<r;o++)e.resolve(t[o]).then(n,i)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},N.resolve=C,N.reject=function(t){var e=new this(T);return _(e,t),e},N._setScheduler=function(t){a=t},N._setAsap=function(t){s=t},N._asap=s,N.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=N},N.Promise=N,N},t.exports=i()}).call(this,n(20),n(21))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){function t(t,e){this.request=t,this.promise=e}return t.prototype.getPromise=function(){return this.promise},t.prototype.getRequest=function(){return this.request},t.prototype.then=function(t,e){return this.promise.then(t,e)},t.prototype.catch=function(t){return this.promise.catch(t)},t.prototype.finally=function(t){return this.promise.finally(t)},t}()},function(t,e,n){n(27),t.exports=n(35)},function(t,e,n){n(28),n(29),n(30),n(31)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){(function(e,n){var i;i=function(){"use strict";function t(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,o=void 0,a=void 0,s=function(t,e){p[r]=t,p[r+1]=e,2===(r+=2)&&(a?a(g):w())},u="undefined"!=typeof window?window:void 0,l=u||{},c=l.MutationObserver||l.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(g,1)}}var p=new Array(1e3);function g(){for(var t=0;t<r;t+=2)(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0;r=0}var m,y,v,b,w=void 0;function E(t,e){var n=this,i=new this.constructor(T);void 0===i[D]&&L(i);var r=n._state;if(r){var o=arguments[r-1];s((function(){return A(r,i,o,n._result)}))}else k(n,i,t,e);return i}function C(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(T);return M(e,t),e}d?w=function(){return e.nextTick(g)}:c?(y=0,v=new c(g),b=document.createTextNode(""),v.observe(b,{characterData:!0}),w=function(){b.data=y=++y%2}):h?((m=new MessageChannel).port1.onmessage=g,w=function(){return m.port2.postMessage(0)}):w=void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(g)}:f()}catch(t){return f()}}():f();var D=Math.random().toString(36).substring(2);function T(){}var x=void 0;function I(e,n,i){n.constructor===e.constructor&&i===E&&n.constructor.resolve===C?function(t,e){1===e._state?S(t,e._result):2===e._state?_(t,e._result):k(e,void 0,(function(e){return M(t,e)}),(function(e){return _(t,e)}))}(e,n):void 0===i?S(e,n):t(i)?function(t,e,n){s((function(t){var i=!1,r=function(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}(n,e,(function(n){i||(i=!0,e!==n?M(t,n):S(t,n))}),(function(e){i||(i=!0,_(t,e))}),t._label);!i&&r&&(i=!0,_(t,r))}),t)}(e,n,i):S(e,n)}function M(t,e){if(t===e)_(t,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof(i=e),null===i||"object"!==r&&"function"!==r)S(t,e);else{var n=void 0;try{n=e.then}catch(e){return void _(t,e)}I(t,e,n)}var i,r}function O(t){t._onerror&&t._onerror(t._result),P(t)}function S(t,e){t._state===x&&(t._result=e,t._state=1,0!==t._subscribers.length&&s(P,t))}function _(t,e){t._state===x&&(t._state=2,t._result=e,s(O,t))}function k(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+1]=n,r[o+2]=i,0===o&&t._state&&s(P,t)}function P(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,r=void 0,o=t._result,a=0;a<e.length;a+=3)i=e[a],r=e[a+n],i?A(n,i,r,o):r(o);t._subscribers.length=0}}function A(e,n,i,r){var o=t(i),a=void 0,s=void 0,u=!0;if(o){try{a=i(r)}catch(t){u=!1,s=t}if(n===a)return void _(n,new TypeError("A promises callback cannot return that same promise."))}else a=r;n._state!==x||(o&&u?M(n,a):!1===u?_(n,s):1===e?S(n,a):2===e&&_(n,a))}var R=0;function L(t){t[D]=R++,t._state=void 0,t._result=void 0,t._subscribers=[]}var j=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(T),this.promise[D]||L(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):_(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===C){var r=void 0,o=void 0,a=!1;try{r=t.then}catch(t){a=!0,o=t}if(r===E&&t._state!==x)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(n===N){var s=new n(T);a?_(s,o):I(s,t,r),this._willSettleAt(s,e)}else this._willSettleAt(new n((function(e){return e(t)})),e)}else this._willSettleAt(i(t),e)},t.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===x&&(this._remaining--,2===t?_(i,n):this._result[e]=n),0===this._remaining&&S(i,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;k(t,void 0,(function(t){return n._settledAt(1,e,t)}),(function(t){return n._settledAt(2,e,t)}))},t}(),N=function(){function e(t){this[D]=R++,this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e((function(e){M(t,e)}),(function(e){_(t,e)}))}catch(e){_(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this,i=n.constructor;return t(e)?n.then((function(t){return i.resolve(e()).then((function(){return t}))}),(function(t){return i.resolve(e()).then((function(){throw t}))})):n.then(e,e)},e}();return N.prototype.then=E,N.all=function(t){return new j(this,t).promise},N.race=function(t){var e=this;return i(t)?new e((function(n,i){for(var r=t.length,o=0;o<r;o++)e.resolve(t[o]).then(n,i)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},N.resolve=C,N.reject=function(t){var e=new this(T);return _(e,t),e},N._setScheduler=function(t){a=t},N._setAsap=function(t){s=t},N._asap=s,N.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=N},N.Promise=N,N},t.exports=i()}).call(this,n(33),n(34))},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var u,l=[],c=!1,d=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):d=-1,l.length&&f())}function f(){if(!c){var t=s(h);c=!0;for(var e=l.length;e;){for(u=l,l=[];++d<e;)u&&u[d].run();d=-1,e=l.length}u=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e),n.d(e,"core",(function(){return a})),n.d(e,"ui",(function(){return i})),n.d(e,"crud",(function(){return r}));var i={};n.r(i),n.d(i,"EasyGrid",(function(){return s.a})),n.d(i,"GridColumnAlign",(function(){return u.b})),n.d(i,"GridColumn",(function(){return u.a})),n.d(i,"GridColumnList",(function(){return u.c})),n.d(i,"CellRendererType",(function(){return l.a})),n.d(i,"GridCellRendererStore",(function(){return l.b})),n.d(i,"Calendar",(function(){return c})),n.d(i,"DateTimePicker",(function(){return h})),n.d(i,"DefaultCalendar",(function(){return g})),n.d(i,"DefaultDateTimePicker",(function(){return w})),n.d(i,"DefaultTimePicker",(function(){return v})),n.d(i,"TimePicker",(function(){return m})),n.d(i,"browserUtils",(function(){return E.a})),n.d(i,"DomElementBuilder",(function(){return f.a})),n.d(i,"DomInputElementBuilder",(function(){return f.b})),n.d(i,"DomSelectElementBuilder",(function(){return f.c})),n.d(i,"domel",(function(){return f.d})),n.d(i,"DropEffect",(function(){return C.b})),n.d(i,"EqDragEvent",(function(){return C.c})),n.d(i,"DragManager",(function(){return C.a})),n.d(i,"eqDragManager",(function(){return C.d})),n.d(i,"mask",(function(){return D.a})),n.d(i,"wrapInner",(function(){return d.q})),n.d(i,"addElement",(function(){return d.b})),n.d(i,"addCssClass",(function(){return d.a})),n.d(i,"hideElement",(function(){return d.k})),n.d(i,"showElement",(function(){return d.m})),n.d(i,"toggleVisibility",(function(){return d.p})),n.d(i,"isVisible",(function(){return d.l})),n.d(i,"createBrowserEvent",(function(){return d.c})),n.d(i,"getViewportSize",(function(){return d.i})),n.d(i,"getDocSize",(function(){return d.f})),n.d(i,"getScrollPos",(function(){return d.h})),n.d(i,"getElementAbsolutePos",(function(){return d.g})),n.d(i,"getWinSize",(function(){return d.j})),n.d(i,"slideDown",(function(){return d.n})),n.d(i,"slideUp",(function(){return d.o})),n.d(i,"eqCssPrefix",(function(){return d.e})),n.d(i,"eqCssMobile",(function(){return d.d})),n.d(i,"DefaultDialogService",(function(){return T.b})),n.d(i,"DefaultDialog",(function(){return T.a})),n.d(i,"DefaultProgressDialog",(function(){return T.c})),n.d(i,"dialogs",(function(){return x}));var r={};n.r(r),n.d(r,"TextDataFilter",(function(){return I.a})),n.d(r,"EntityEditForm",(function(){return _})),n.d(r,"TextFilterWidget",(function(){return M})),n.d(r,"ProgressBar",(function(){return k})),n.d(r,"DataContext",(function(){return A})),n.d(r,"EasyDataServerLoader",(function(){return P})),n.d(r,"Validator",(function(){return R})),n.d(r,"TypeValidator",(function(){return j})),n.d(r,"RequiredValidator",(function(){return H})),n.d(r,"EasyDataViewDispatcher",(function(){return V})),n.d(r,"RootDataView",(function(){return F})),n.d(r,"EntityDataView",(function(){return B}));var o,a=n(0),s=n(23),u=n(6),l=n(7),c=function(){function t(t,e){this.slot=t,this.options=e||{},this.options.yearRange||(this.options.yearRange="c-10:c+10")}return Object.defineProperty(t.prototype,"cssPrefix",{get:function(){return"kdtp-cal"},enumerable:!0,configurable:!0}),t.prototype.setDate=function(t){this.currentDate=new Date(t)},t.prototype.getDate=function(){return new Date(this.currentDate)},t.prototype.dateChanged=function(t){this.options.onDateChanged&&this.options.onDateChanged(this.currentDate,t)},t}(),d=n(5),h=function(){function t(t){this.calendar=null,this.timePicker=null,this.options=t,this.render()}return Object.defineProperty(t.prototype,"cssPrefix",{get:function(){return"kdtp"},enumerable:!0,configurable:!0}),t.prototype.setDateTime=function(t){this.currentDateTime=new Date(t),this.calendar&&this.calendar.setDate(this.currentDateTime),this.timePicker&&this.timePicker.setTime(this.currentDateTime)},t.prototype.getDateTime=function(){return new Date(this.currentDateTime)},t.prototype.render=function(){var t=this;this.options.showCalendar&&(this.calendar=this.createCalendar({yearRange:this.options.yearRange,showDateTimeInput:this.options.showDateTimeInput,timePickerIsUsed:this.options.showTimePicker,oneClickDateSelection:this.options.oneClickDateSelection,onDateChanged:function(e,n){t.currentDateTime=e,t.timePicker&&t.timePicker.setTime(t.currentDateTime),t.options.showTimePicker&&t.dateTimeChanged(),n&&t.apply(t.currentDateTime)}}),this.calendar&&this.calendar.render()),this.options.showTimePicker&&(this.timePicker=this.createTimePicker({onTimeChanged:function(e){t.currentDateTime.setHours(e.getHours()),t.currentDateTime.setMinutes(e.getMinutes()),t.calendar&&t.calendar.setDate(t.currentDateTime),t.dateTimeChanged()}}),this.timePicker&&this.timePicker.render()),this.setDateTime(new Date)},t.prototype.createCalendar=function(t){return null},t.prototype.createTimePicker=function(t){return null},t.prototype.show=function(t){this.options.beforeShow&&this.options.beforeShow();var e=Object(d.g)(t||document.body);this.slot.style.top=e.y+t.clientHeight+"px",this.slot.style.left=e.x+"px"},t.prototype.apply=function(t){this.options.onApply&&this.options.onApply(t),this.destroy()},t.prototype.cancel=function(){this.options.onCancel&&this.options.onCancel(),this.destroy()},t.prototype.destroy=function(){this.slot&&this.slot.parentElement&&this.slot.parentElement.removeChild(this.slot)},t.prototype.dateTimeChanged=function(){this.options.onDateTimeChanged&&this.options.onDateTimeChanged(this.currentDateTime)},t}(),f=n(1),p=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),g=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.daysOfWeek=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i.calendarBody=null,i.isManualInputChanging=!1;for(var r=0;r<i.daysOfWeek.length;r++)i.daysOfWeek[r]=a.i18n.getShortWeekDayName(r+1);for(r=0;r<i.months.length;r++)i.months[r]=a.i18n.getLongMonthName(r+1);return i}return p(e,t),e.prototype.setDate=function(e){t.prototype.setDate.call(this,e),this.selectedMonth=this.currentDate.getMonth(),this.selectedYear=this.currentDate.getFullYear(),this.rerenderMonth()},e.prototype.render=function(){var t=this,e=Object(f.d)("div",this.slot).addClass(this.cssPrefix+"-header");this.options.showDateTimeInput?e.addChildElement(this.renderManualDateInput()):e.addChild("span",(function(e){return t.headerTextElem=e.toDOM()})),Object(f.d)(this.slot).addChildElement(this.renderCalendarButtons()),this.calendarBody=Object(f.d)("div",this.slot).addClass(this.cssPrefix+"-body").toDOM()},e.prototype.getInputDateFormat=function(){var t=a.i18n.getLocaleSettings();return this.options.timePickerIsUsed?t.editDateFormat+" "+t.editTimeFormat:t.editDateFormat},e.prototype.renderManualDateInput=function(){var t=this,e=this.getInputDateFormat(),n=Object(f.d)("input").attr("placeholder",e).addClass(this.cssPrefix+"-header-input");return n.mask(e.replace("yyyy","9999").replace("MM","99").replace("dd","99").replace("HH","99").replace("mm","99").replace("ss","99")).on("input",(function(i){n.removeClass("error");try{t.isManualInputChanging=!0;var r=a.utils.strToDateTime(t.manualInputElem.value,e);t.currentDate=r,t.jump(t.currentDate.getFullYear(),t.currentDate.getMonth()),t.dateChanged(!1)}catch(t){n.addClass("error")}finally{t.isManualInputChanging=!1}})).on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),t.manualInputElem.className.indexOf("error")<0&&!t.isManualInputChanging&&t.dateChanged(!0))})).on("focus",(function(){setTimeout((function(){t.manualInputElem.selectionStart=0,t.manualInputElem.selectionEnd=0}),50)})),this.manualInputElem=n.toDOM(),this.manualInputElem},e.prototype.updateDisplayedDateValue=function(){if(this.manualInputElem){if(!this.isManualInputChanging){var t=this.getInputDateFormat();this.manualInputElem.value=a.utils.dateTimeToStr(this.currentDate,t),this.manualInputElem.focus()}}else if(this.headerTextElem){var e=a.i18n.getCurrentLocale();this.headerTextElem.innerText=this.currentDate.toLocaleString("en"==e?void 0:e,{year:"numeric",month:"long",day:"numeric"})}},e.prototype.renderCalendarButtons=function(){var t=this;return Object(f.d)("nav").addClass(this.cssPrefix+"-nav").addChild("div",(function(e){return e.addClass(t.cssPrefix+"-nav-prev").on("click",(function(){t.prev()})).addChild("span",(function(t){return t.html("&lsaquo;")}))})).addChild("div",(function(e){return e.addClass(t.cssPrefix+"-nav-selectors").addChild("div",(function(e){return e.addClass(t.cssPrefix+"-nav-month").addChild("select",(function(e){e.on("change",(function(){t.jump(t.selectedYear,parseInt(t.selectMonthElem.value))}));for(var n=function(n){e.addChild("option",(function(e){return e.attr("value",n.toString()).text(t.months[n])}))},i=0;i<t.months.length;i++)n(i);t.selectMonthElem=e.toDOM()}))})).addChild("div",(function(e){return e.addClass(t.cssPrefix+"-nav-year").addChild("select",(function(e){return t.selectYearElem=e.on("change",(function(){t.jump(parseInt(t.selectYearElem.value),t.selectedMonth)})).toDOM()}))}))})).addChild("div",(function(e){return e.addClass(t.cssPrefix+"-nav-next").on("click",(function(){t.next()})).addChild("span",(function(t){return t.html("&rsaquo;")}))})).toDOM()},e.prototype.prev=function(){this.selectedYear=0===this.selectedMonth?this.selectedYear-1:this.selectedYear,this.selectedMonth=0===this.selectedMonth?11:this.selectedMonth-1,this.rerenderMonth()},e.prototype.next=function(){this.selectedYear=11===this.selectedMonth?this.selectedYear+1:this.selectedYear,this.selectedMonth=(this.selectedMonth+1)%12,this.rerenderMonth()},e.prototype.rerenderSelectYear=function(){var t=/c-(\d*):c\+(\d*)/g.exec(this.options.yearRange),e=0,n=1;null!==t&&(e=parseInt(t[1]),n=parseInt(t[2])),this.selectYearElem.innerHTML="";for(var i=0;i<=e+n;i++){var r=document.createElement("option"),o=this.selectedYear-e+i;r.value=o.toString(),r.innerText=o.toString(),this.selectYearElem.appendChild(r)}},e.prototype.jump=function(t,e){this.selectedYear=t,this.selectedMonth=e,this.rerenderMonth()},e.prototype.rerenderMonth=function(){var t=this;this.updateDisplayedDateValue(),this.rerenderSelectYear();var e=new Date(this.selectedYear,this.selectedMonth).getDay(),n=new Date(this.selectedYear,this.selectedMonth+1,0).getDate();this.calendarBody.innerHTML="",this.selectYearElem.value=this.selectedYear.toString(),this.selectMonthElem.value=this.selectedMonth.toString(),this.daysOfWeek.forEach((function(e,n){Object(f.d)("div",t.calendarBody).addClass(t.cssPrefix+"-weekday").addClass(0==n||6==n?t.cssPrefix+"-weekend":"").text(e)}));for(var i=0;i<e;i++)Object(f.d)("div",this.calendarBody).addClass(this.cssPrefix+"-day-empty");for(var r=new Date,o=1;o<=n;o++){var a=Object(f.d)("div",this.calendarBody).addClass(this.cssPrefix+"-day").attr("data-date",o.toString()).text(o.toString()).on("click",(function(e){t.currentDate.setFullYear(t.selectedYear),t.currentDate.setMonth(t.selectedMonth),t.currentDate.setDate(parseInt(e.target.getAttribute("data-date"))),t.dateChanged(t.options.oneClickDateSelection)}));o===r.getDate()&&this.selectedYear===r.getFullYear()&&this.selectedMonth===r.getMonth()&&a.addClass(this.cssPrefix+"-day-current"),o===this.currentDate.getDate()&&this.selectedYear===this.currentDate.getFullYear()&&this.selectedMonth===this.currentDate.getMonth()&&a.addClass(this.cssPrefix+"-day-selected");var s=(e+o-1)%7;0!=s&&6!=s||a.addClass(this.cssPrefix+"-weekend")}var u=(e+n)%7,l=0==u?0:7-u;for(i=0;i<l;i++)Object(f.d)("div",this.calendarBody).addClass(this.cssPrefix+"-day-empty")},e.prototype.dateChanged=function(e){t.prototype.dateChanged.call(this,e),this.rerenderMonth()},e}(c),m=function(){function t(t,e){this.slot=t,this.options=e||{}}return Object.defineProperty(t.prototype,"cssPrefix",{get:function(){return"kdtp-tp"},enumerable:!0,configurable:!0}),t.prototype.setTime=function(t){this.currentTime=new Date(t)},t.prototype.getTime=function(){return new Date(this.currentTime)},t.prototype.timeChanged=function(){this.options.onTimeChanged&&this.options.onTimeChanged(this.currentTime)},t}(),y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.setTime=function(e){t.prototype.setTime.call(this,e),this.updateDisplayedTime(),this.hoursInput.valueAsNumber=e.getHours(),this.minutesInput.valueAsNumber=e.getMinutes()},e.prototype.render=function(){var t=this;Object(f.d)("div",this.slot).addClass(this.cssPrefix+"-time").addChild("span",(function(e){return t.timeText=e.toDOM()})).toDOM();var e=Object(f.d)("div",this.slot).addClass(this.cssPrefix+"-sliders");return e.addChild("div",(function(e){return e.addClass(t.cssPrefix+"-time-row").title("Hours").addChild("input",(function(e){return t.hoursInput=e.addClass(t.cssPrefix+"-input-hours").type("range").attr("min","0").attr("max","23").attr("step","1").on("input",(function(e){t.currentTime.setHours(t.hoursInput.valueAsNumber),t.updateDisplayedTime(),t.timeChanged()})).toDOM()}))})),e.addChild("div",(function(e){return e.addClass(t.cssPrefix+"-time-row").title("Minutes").addChild("input",(function(e){return t.minutesInput=e.addClass(t.cssPrefix+"-input-minutes").type("range").attr("min","0").attr("max","59").attr("step","1").on("input",(function(e){t.currentTime.setMinutes(t.minutesInput.valueAsNumber),t.updateDisplayedTime(),t.timeChanged()})).toDOM()}))})),this.slot},e.prototype.updateDisplayedTime=function(){var t=a.i18n.getCurrentLocale(),e=this.currentTime.toLocaleString("en"==t?void 0:t,{hour:"numeric",minute:"numeric"});this.timeText.innerText=e},e}(m),b=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return b(e,t),e.prototype.render=function(){var e=this;this.slot=Object(f.d)("div",document.body).addClass(""+this.cssPrefix).attr("tabIndex","0").setStyle("position","absolute").setStyle("top","-1000px").setStyle("left","-1000px").on("keydown",(function(t){return 27===t.keyCode?e.cancel():13===t.keyCode&&e.apply(e.getDateTime()),!1})).toDOM(),t.prototype.render.call(this),this.renderButtons(),this.globalMouseDownHandler=function(t){var n=window.event||t;n.srcElement||n.target;return!e.slot.contains(n.target)&&(document.removeEventListener("mousedown",e.globalMouseDownHandler,!0),e.cancel()),!0}},e.prototype.renderButtons=function(){var t=this,e=Object(f.d)("div",this.slot).addClass(this.cssPrefix+"-buttons").addChild("button",(function(e){return t.nowButton=e.addClass(t.cssPrefix+"-button "+t.cssPrefix+"-button-now").text(a.i18n.getText("ButtonNow")).on("click",(function(){return t.setDateTime(new Date),t.dateTimeChanged(),!1})).toDOM()}));!this.options.showTimePicker&&this.options.oneClickDateSelection||e.addChild("button",(function(e){return t.submitButton=e.addClass(t.cssPrefix+"-button "+t.cssPrefix+"-button-apply").text(a.i18n.getText("ButtonApply")).on("click",(function(){return t.apply(t.getDateTime()),!1})).toDOM()})),e.addChild("button",(function(e){return t.submitButton=e.addClass(t.cssPrefix+"-button "+t.cssPrefix+"-button-cancel").text(a.i18n.getText("ButtonCancel")).on("click",(function(){return t.cancel(),!1})).toDOM()}))},e.prototype.createCalendar=function(t){return this.calendarSlot=Object(f.d)("div",this.slot).addClass(this.cssPrefix+"-cal").toDOM(),new g(this.calendarSlot,t)},e.prototype.createTimePicker=function(t){return this.timePickerSlot=Object(f.d)("div",this.slot).addClass(this.cssPrefix+"-tp").toDOM(),new v(this.timePickerSlot,t)},e.prototype.show=function(e){var n=this;if(this.options.showDateTimeInput){this.options.beforeShow&&this.options.beforeShow();var i=Object(d.g)(e||document.body),r=Object(d.g)(e?e.parentElement||e:document.body);this.slot.style.top=r.y+"px",this.slot.style.left=i.x+"px"}else t.prototype.show.call(this,e),this.slot.focus();setTimeout((function(){document.addEventListener("mousedown",n.globalMouseDownHandler,!0)}),1)},e}(h),E=n(14),C=n(9),D=n(15),T=n(16);a.i18n.updateDefaultTexts({GridPageInfo:"{FirstPageRecordNum} - {LastPageRecordNum} of {Total} records",ButtonOK:"OK",ButtonCancel:"Cancel",ButtonApply:"Apply",ButtonNow:"Now"});var x=new T.b,I=n(17),M=function(){function t(t,e,n,i){var r=this;this.slot=t,this.grid=e,this.filter=n,this.options={focus:!1,instantMode:!1,instantTimeout:1e3},this.options=a.utils.assignDeep(this.options,i||{});var o=this.grid.cellRendererStore.getDefaultRendererByType(l.a.STRING);this.grid.cellRendererStore.setDefaultRenderer(l.a.STRING,(function(t,e,n,i){return r.highlightCellRenderer(o,t,e,n,i)}));var s=this.grid.cellRendererStore.getDefaultRendererByType(l.a.NUMBER);this.grid.cellRendererStore.setDefaultRenderer(l.a.NUMBER,(function(t,e,n,i){return r.highlightCellRenderer(s,t,e,n,i)})),this.render()}return t.prototype.render=function(){var t=this,e=E.a.IsIE()?"kfrm-fields-ie is-horizontal":"kfrm-fields is-horizontal",n=E.a.IsIE()||E.a.IsEdge();Object(f.d)(this.slot).addClass(e).addChild("div",(function(e){e.addClass("control").addChild("input",(function(e){t.filterInput=e.toDOM(),e.attr("placeholder",a.i18n.getText("SearchInputPlaceholder")).type("text"),e.on("keydown",t.inputKeydownHandler.bind(t)),t.options.instantMode&&e.on("keyup",t.inputKeyupHandler.bind(t))})),n||e.addClass("has-icons-right").addChild("span",(function(e){e.addClass("icon").addClass("is-right").addClass("is-clickable").html("&#x1F5D9;").on("click",t.clearButtonClickHander.bind(t))}))})),this.options.instantMode||Object(f.d)(this.slot).addChild("button",(function(e){return e.addClass("kfrm-button").addText(a.i18n.getText("SearchBtn")).on("click",t.searchButtonClickHandler.bind(t))})),this.options.focus&&this.filterInput.focus()},t.prototype.inputKeydownHandler=function(t){13==t.keyCode&&this.applyFilter()},t.prototype.inputKeyupHandler=function(){var t=this;this.applyFilterTimeout&&clearTimeout(this.applyFilterTimeout),this.applyFilterTimeout=setTimeout((function(){t.applyFilter()}),this.options.instantTimeout)},t.prototype.clearButtonClickHander=function(){this.filterInput.value="",this.filterInput.focus(),this.applyFilter()},t.prototype.searchButtonClickHandler=function(){this.applyFilter()},t.prototype.applyFilter=function(){var t=this;this.applyFilterTimeout&&clearTimeout(this.applyFilterTimeout),this.filter.getValue()!=this.filterInput.value&&this.filter.apply(this.filterInput.value).then((function(e){t.grid.setData(e)}))},t.prototype.highlightCellRenderer=function(t,e,n,i,r){(a.utils.isIntType(n.type)||a.utils.getStringDataTypes().indexOf(n.type)>=0)&&e&&("number"==typeof e&&(e=e.toLocaleString()),e=this.highlightText(e.toString())),t(e,n,i,r)},t.prototype.highlightText=function(t){var e=t.toLowerCase(),n=this.filter.getValue().toString();if(n&&n.length>0&&t&&t.length>0){for(var i="<span style='background-color: yellow'>",r="</span>",o=[],a=n.split("||").map((function(t){return t.trim().toLowerCase()})),s=0;s<a.length;s++){var u=0,l=a[s];if(l.length){if(l===e)return i+t+r;for(;u<t.length-1;){var c=e.indexOf(l,u);c>=0?(o.push({index:c,length:a[s].length}),u=c+l.length):u++}}}if(o.length>0){o.sort((function(t,e){return t.index>e.index?1:t.index==e.index2?0:-1}));for(s=0;s<o.length-1;){var d=o[s+1].index-(o[s].index+o[s].length);if(d<0){var h=o[s+1].length+d;h>0&&(o[s].length+=h),o.splice(s+1,1)}else s++}var f="";for(s=0;s<o.length;s++)0===s&&(f+=t.substring(0,o[s].index)),f+=i+t.substring(o[s].index,o[s].index+o[s].length)+r,s<o.length-1?f+=t.substring(o[s].index+o[s].length,o[s+1].index):f+=t.substring(o[s].index+o[s].length);t=f}}return t},t}(),O=function(){return(O=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},S=E.a.IsIE(),_=function(){function t(t,e){this.context=t,this.html=e,this.validators=[],this.errorsDiv=e.querySelector(".errors-block")}return t.prototype.getHtml=function(){return this.html},t.prototype.validate=function(){this.clearErrors();for(var t=!0,e=0,n=Array.from(this.html.querySelectorAll("input, select"));e<n.length;e++){var i=n[e],r=this.context.getMetaData().getAttributeById(i.name);if("checkbox"!==i.type){var o=this.validateValue(r,i.value);if(!o.successed){t&&Object(f.d)(this.errorsDiv).addChild("ul"),t=!1;for(var a=0,s=o.messages;a<s.length;a++){var u=s[a];this.errorsDiv.firstElementChild.innerHTML+="<li>"+r.caption+": "+u+"</li>"}}this.markInputValid(i,o.successed)}}return t},t.prototype.getData=function(){for(var t={},e=0,n=Array.from(this.html.querySelectorAll("input, select"));e<n.length;e++){var i=n[e],r=i.name.substring(i.name.lastIndexOf(".")+1),o=this.context.getMetaData().getAttributeById(i.name);t[r]="checkbox"!==i.type?this.mapValue(o.dataType,i.value):i.checked}return t},t.prototype.useValidator=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.useValidators(t)},t.prototype.useValidators=function(t){this.validators=this.validators.concat(t)},t.prototype.mapValue=function(t,e){return a.utils.getDateDataTypes().indexOf(t)>=0?new Date(e):a.utils.isIntType(t)?parseInt(e):a.utils.isNumericType(t)?parseFloat(e):e},t.prototype.clearErrors=function(){this.errorsDiv.innerHTML="",this.html.querySelectorAll("input, select").forEach((function(t){t.classList.remove("is-valid"),t.classList.remove("is-invalid")}))},t.prototype.markInputValid=function(t,e){t.classList.add(e?"is-valid":"is-invalid")},t.prototype.validateValue=function(t,e){for(var n={successed:!0,messages:[]},i=0,r=this.validators;i<r.length;i++){var o=r[i].validate(t,e);o.successed||(n.successed=!1,n.messages=n.messages.concat(o.messages))}return n},t.build=function(e,n){var i;n=n||{};for(var r=Object(f.d)("div").addClass("kfrm-form").addChild("div",(function(t){return t.addClass("errors-block").toDOM()})).addChild("div",(function(t){t.addClass(S?"kfrm-fields-ie col-ie-1-4 label-align-right":"kfrm-fields col-a-1 label-align-right"),i=t})).toDOM(),o=function(t){return t==a.DataType.Bool?"checkbox":"text"},u=function(t,i){var r=n.values&&i.kind!==a.EntityAttrKind.Lookup?n.values.getValue(i.id):void 0,u=function(t){return t.defaultEditor||new a.ValueEditor}(i);u.tag==a.EditorTag.Unknown&&(a.utils.getDateDataTypes().indexOf(i.dataType)>=0?u.tag=a.EditorTag.DateTime:u.tag=a.EditorTag.Edit);var l=n.isEditForm&&(i.isPrimaryKey||!i.isEditable),c=!i.isNullable;if(S&&(t=Object(f.d)("div",t).addClass("kfrm-field-ie").toDOM()),Object(f.d)(t).addChild("label",(function(t){return t.attr("for",i.id).addHtml(i.caption+" "+(c?'<sup style="color: red">*</sup>':"")+": ")})),i.kind!==a.EntityAttrKind.Lookup)switch(u.tag){case a.EditorTag.DateTime:Object(f.d)(t).addChild("input",(function(t){l&&t.attr("readonly",""),t.name(i.id),t.value(a.utils.IsDefinedAndNotNull(r)?new Date(r).toUTCString():""),l||t.on("focus",(function(t){var e=t.target,n=e.value?new Date(e.value):new Date,r={showCalendar:i.dataType!==a.DataType.Time,showTimePicker:i.dataType!==a.DataType.Date,onApply:function(t){e.value=t.toUTCString()},onCancel:function(){e.value=n.toUTCString()},onDateTimeChanged:function(t){e.value=t.toUTCString()}},o=new w(r);o.setDateTime(n),o.show(e)}))}));break;case a.EditorTag.List:Object(f.d)(t).addChild("select",(function(t){if(l&&t.attr("readonly",""),t.attr("name",i.id),u.values)for(var e=0;e<u.values.length;e++)t.addOption({value:r.id,title:r.text,selected:0===e})}));case a.EditorTag.Edit:default:Object(f.d)(t).addChild("input",(function(t){l&&t.attr("readonly",""),t.name(i.id).type(o(i.dataType)),i.dataType==a.DataType.Bool?r&&t.attr("checked",""):t.value(a.utils.IsDefinedAndNotNull(r)?r.toString():"")}))}else{var d=e.getMetaData().getRootEntity().subEntities.filter((function(t){return t.id==i.lookupEntity}))[0],h=e.getMetaData().getAttributeById(i.dataAttr);l=l&&h.isEditable,r=n.values?n.values.getValue(h.id):void 0;var p,g=S?"kfrm-fields-ie is-horizontal":"kfrm-fields is-horizontal";Object(f.d)(t).addChild("div",(function(t){t.addClass(g).addChild("input",(function(t){p=t.toDOM(),t.attr("readonly",""),t.name(h.id),t.type(o(h.dataType)),t.value(a.utils.IsDefinedAndNotNull(r)?r.toString():"")})),l||t.addChild("button",(function(t){return t.addClass("kfrm-button").attr("title",a.i18n.getText("NavigationBtnTitle")).addText("...").on("click",(function(t){var n=new a.EasyDataTable({loader:{loadChunk:function(t){return e.getDataLoader().loadChunk(O({},t,{id:d.id}))}}});e.getDataLoader().loadChunk({offset:0,limit:1e3,needTotal:!0,entityId:d.id}).then((function(t){for(var r=function(t){d.attributes.filter((function(e){return e.id==t.id&&(e.isPrimaryKey||e.showInLookup)})).length&&n.columns.add(t)},o=0,u=t.table.columns.getItems();o<u.length;o++){r(u[o])}n.setTotal(t.total);for(var l=0,c=t.table.getCachedRows();l<c.length;l++){var h=c[l];n.addRow(h)}var g,m=new T.b,y=null,v=null,b=Object(f.d)("div").addClass("kfrm-form").addChild("div",(function(t){return t.addClass("kfrm-field").addChild("label",(function(t){return t.addText(a.i18n.getText("LookupSelectedItem")).toDOM()})).addChild("div",(function(t){return v=t.addText("None").toDOM()}))})).addChild("div",(function(t){return g=t.toDOM()})).addChild("div",(function(t){return t.addClass("kfrm-control").addChild("div",(function(t){return y=t.toDOM()}))})).toDOM(),w=p.value,E=function(t){v.innerHTML=n.columns.getItems().map((function(e){return"<b>"+e.label+":</b> "+function(t,e){return t instanceof a.DataRow?t.getValue(e):t[e.substring(e.lastIndexOf(".")+1)]}(t,e.id)})).join(", ")};w&&e.getEntity(w,d.id).then((function(t){t.entity&&E(t.entity)})).catch((function(t){console.error(t)}));var C=new s.a({slot:y,dataTable:n,fixHeightOnFirstRender:!0,paging:{pageSize:10},onActiveRowChanged:function(t){C.getData().getRow(t.rowIndex).then((function(t){w=t.getValue(i.lookupDataAttr),E(t)}))}});m.open({title:a.i18n.getText("LookupDlgCaption").replace("{entity}",d.caption),body:b,arrangeParents:!0,beforeOpen:function(){var t=e.createFilter(d.id,C.getData(),!0);new M(g,C,t,{instantMode:!0,focus:!0})},onSubmit:function(){return p.value=w,!0},onDestroy:function(){C.destroy()}})}))}))}))}))}},l=0,c=e.getActiveEntity().attributes;l<c.length;l++){var d=c[l];if(!d.isForeignKey){if(n.isEditForm){if(!d.showOnEdit)continue}else if(!d.showOnCreate)continue;u(i.toDOM(),d)}}return new t(e,r)},t}(),k=function(){function t(t){this.slot=t,this.hide(),this.slot.classList.add("ed-progress-bar")}return t.prototype.show=function(){this.slot.style.removeProperty("display")},t.prototype.hide=function(){this.slot.style.display="none"},t}(),P=function(){function t(t){this.context=t}return t.prototype.loadChunk=function(t){var e=this,n=this.context.resolveEndpoint("GetEntities",{entityId:t.entityId||this.context.getActiveEntity().id});return delete t.entityId,this.context.startProcess(),this.context.getHttpClient().post(n,t).then((function(e){for(var n=new a.EasyDataTable({chunkSize:1e3}),i=e.resultSet,r=0,o=i.cols;r<o.length;r++){var s=o[r];n.columns.add(s)}for(var u=0,l=i.rows;u<l.length;u++){var c=l[u];n.addRow(c)}var d=0;return e.meta&&e.meta.totalRecords&&(d=e.meta.totalRecords),{table:n,total:d,hasNext:!t.needTotal||t.offset+t.limit<d}})).finally((function(){e.context.endProcess()}))},t}(),A=function(){function t(t){this.endpoints=new Map,this.endpointVarsRegex=/\{.*?\}/g,this.options=t||{},this.http=new a.HttpClient,this.model=new a.MetaData,this.model.id=t.metaDataId||"__default",this.dataLoader=new P(this),this.data=new a.EasyDataTable({loader:this.dataLoader}),this.setDefaultEndpoints(this.options.endpoint||"/api/easydata")}return t.prototype.setActiveEntity=function(t){this.activeEntity=this.model.getRootEntity().subEntities.filter((function(e){return e.id==t}))[0]},t.prototype.getMetaData=function(){return this.model},t.prototype.getData=function(){return this.data},t.prototype.getDataLoader=function(){return this.dataLoader},t.prototype.createFilter=function(t,e,n){return new I.a(this.dataLoader,e||this.getData(),t||this.activeEntity.id,n)},t.prototype.loadMetaData=function(){var t=this,e=this.resolveEndpoint("GetMetaData");return this.startProcess(),this.http.get(e).then((function(e){return e.model&&t.model.loadFromData(e.model),t.model})).catch((function(t){return console.error("Error: "+t.message+". Source: "+t.sourceError),null})).finally((function(){t.endProcess()}))},t.prototype.getActiveEntity=function(){return this.activeEntity},t.prototype.getHttpClient=function(){return this.http},t.prototype.getEntities=function(){var t=this;return this.dataLoader.loadChunk({offset:0,limit:this.data.chunkSize,needTotal:!0}).then((function(e){for(var n=0,i=e.table.columns.getItems();n<i.length;n++){var r=i[n];t.data.columns.add(r)}t.data.setTotal(e.total);for(var o=0,a=e.table.getCachedRows();o<a.length;o++){var s=a[o];t.data.addRow(s)}return t.data}))},t.prototype.getEntity=function(t,e){var n=this,i=this.resolveEndpoint("GetEntity",{id:t,entityId:e||this.activeEntity.id});return this.startProcess(),this.http.get(i).getPromise().finally((function(){return n.endProcess()}))},t.prototype.createEntity=function(t,e){var n=this,i=this.resolveEndpoint("CreateEntity",{entityId:e||this.activeEntity.id});return this.startProcess(),this.http.post(i,t,{dataType:"json"}).getPromise().finally((function(){return n.endProcess()}))},t.prototype.updateEntity=function(t,e,n){var i=this,r=this.resolveEndpoint("UpdateEntity",{id:t,entityId:n||this.activeEntity.id});return this.startProcess(),this.http.post(r,e,{dataType:"json"}).getPromise().finally((function(){return i.endProcess()}))},t.prototype.deleteEntity=function(t,e){var n=this,i=this.resolveEndpoint("DeleteEntity",{id:t,entityId:e||this.activeEntity.id});return this.startProcess(),this.http.post(i,null).getPromise().finally((function(){return n.endProcess()}))},t.prototype.setEndpoint=function(t,e){this.endpoints.set(t,e)},t.prototype.setEnpointIfNotExist=function(t,e){this.endpoints.has(t)||this.endpoints.set(t,e)},t.prototype.resolveEndpoint=function(t,e){e=e||{};var n=this.endpoints.get(t);if(!n)throw t+" endpoint is not defined";var i=n.match(this.endpointVarsRegex);if(i)for(var r=0,o=i;r<o.length;r++){var a=o[r],s=a.substring(1,a.length-1),u=e[s];if(!u)if("modelId"==s)u=this.model.getId();else{if("entityId"!=s)throw"Parameter ["+s+"] is not defined";u=this.activeEntity.id}n=n.replace(a,u)}return n},t.prototype.startProcess=function(){this.options.onProcessStart&&this.options.onProcessStart()},t.prototype.endProcess=function(){this.options.onProcessEnd&&this.options.onProcessEnd()},t.prototype.setDefaultEndpoints=function(t){this.setEnpointIfNotExist("GetMetaData",Object(a.combinePath)(t,"models/{modelId}")),this.setEnpointIfNotExist("GetEntities",Object(a.combinePath)(t,"models/{modelId}/crud/{entityId}/fetch")),this.setEnpointIfNotExist("GetEntity",Object(a.combinePath)(t,"models/{modelId}/crud/{entityId}/fetch/{id}")),this.setEnpointIfNotExist("CreateEntity",Object(a.combinePath)(t,"models/{modelId}/crud/{entityId}/create")),this.setEnpointIfNotExist("UpdateEntity",Object(a.combinePath)(t,"models/{modelId}/crud/{entityId}/update/{id}")),this.setEnpointIfNotExist("DeleteEntity",Object(a.combinePath)(t,"models/{modelId}/crud/{entityId}/delete/{id}"))},t}(),R=function(){},L=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),j=function(t){function e(){var e=t.call(this)||this;return e.name="Type",e}return L(e,t),e.prototype.validate=function(t,e){if(!a.utils.IsDefinedAndNotNull(e)||""==e)return{successed:!0};if(a.utils.isNumericType(t.dataType)){if(!a.utils.isNumeric(e))return{successed:!1,messages:[a.i18n.getText("NumberError")]};if(a.utils.isIntType(t.dataType)&&!Number.isInteger(Number.parseFloat(e)))return{successed:!1,messages:[a.i18n.getText("IntNumberError")]}}return{successed:!0}},e}(R),N=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),H=function(t){function e(){var e=t.call(this)||this;return e.name="Required",e}return N(e,t),e.prototype.validate=function(t,e){return t.isNullable||a.utils.IsDefinedAndNotNull(e)&&""!==e?{successed:!0}:{successed:!1,messages:[a.i18n.getText("RequiredError")]}},e}(R),B=function(){function t(t,e,n,i){this.slot=t,this.context=e,this.basePath=n,this.options={showBackToEntities:!0},this.defaultValidators=[new H,new j],i=i||{},this.options=a.utils.assignDeep(this.options,i||{}),this.dlg=new T.b;var r=this.context.getActiveEntity();this.slot.innerHTML+="<h1>"+(r.captionPlural||r.caption)+"</h1>",this.options.showBackToEntities&&(this.slot.innerHTML+='<a href="'+this.basePath+'"> ← '+a.i18n.getText("BackToEntities")+"</a>"),this.renderGrid()}return t.prototype.syncGridColumnHandler=function(t){if(t.dataColumn){var e=this.context.getMetaData().getAttributeById(t.dataColumn.id);e&&(t.isVisible=e.showOnView)}},t.prototype.renderGrid=function(){var t=this;this.context.getEntities().then((function(e){var n,i=document.createElement("div");t.slot.appendChild(i),i.id="Grid",t.grid=new s.a({slot:i,dataTable:e,paging:{pageSize:15},addColumns:!0,addColumnsTitle:a.i18n.getText("AddBtnTitle"),showActiveRow:!1,onAddColumnClick:t.addClickHandler.bind(t),onGetCellRenderer:t.manageCellRenderer.bind(t),onRowDbClick:t.rowDbClickHandler.bind(t),onSyncGridColumn:t.syncGridColumnHandler.bind(t)});var r=Object(f.d)("div").addClass("kfrm-form").setStyle("margin","10px 0px").addChild("div",(function(t){return n=t.toDOM()})).toDOM();t.slot.insertBefore(r,i);var o=t.context.createFilter();new M(n,t.grid,o)}))},t.prototype.manageCellRenderer=function(t,e){var n=this;if(t.isRowNum)return t.width=110,function(t,e,i,r){Object(f.d)("div",i).addClass("keg-cell-value").addChild("a",(function(t){return t.attr("href","javascript:void(0)").text(a.i18n.getText("EditBtn")).on("click",(function(t){return n.editClickHandler(t,parseInt(r.getAttribute("data-row-idx")))}))})).addChild("span",(function(t){return t.text(" | ")})).addChild("a",(function(t){return t.attr("href","javascript:void(0)").text(a.i18n.getText("DeleteBtn")).on("click",(function(t){return n.deleteClickHandler(t,parseInt(r.getAttribute("data-row-idx")))}))}))}},t.prototype.addClickHandler=function(){var t=this,e=this.context.getActiveEntity(),n=_.build(this.context);n.useValidators(this.defaultValidators),this.dlg.open({title:a.i18n.getText("AddDlgCaption").replace("{entity}",e.caption),body:n.getHtml(),onSubmit:function(){if(!n.validate())return!1;var e=n.getData();t.context.createEntity(e).then((function(){window.location.reload()})).catch((function(e){t.processError(e)}))}})},t.prototype.editClickHandler=function(t,e){var n=this;this.context.getData().getRow(e).then((function(t){t&&n.showEditForm(t)}))},t.prototype.showEditForm=function(t){var e=this,n=this.context.getActiveEntity(),i=_.build(this.context,{isEditForm:!0,values:t});i.useValidators(this.defaultValidators),this.dlg.open({title:a.i18n.getText("EditDlgCaption").replace("{entity}",n.caption),body:i.getHtml(),onSubmit:function(){var r=n.attributes.filter((function(t){return t.isPrimaryKey})).map((function(e){return t.getValue(e.id)}));if(!i.validate())return!1;var o=i.getData();e.context.updateEntity(r.join(":"),o).then((function(){window.location.reload()})).catch((function(t){e.processError(t)}))}})},t.prototype.rowDbClickHandler=function(t){this.showEditForm(t.row)},t.prototype.deleteClickHandler=function(t,e){var n=this;this.context.getData().getRow(e).then((function(t){if(t){var e=n.context.getActiveEntity(),i=e.attributes.filter((function(t){return t.isPrimaryKey})),r=i.map((function(e){return t.getValue(e.id)})),o=i.map((function(t,e){return t.id+":"+r[e]})).join(";");n.dlg.openConfirm(a.i18n.getText("DeleteDlgCaption").replace("{entity}",e.caption),a.i18n.getText("DeleteDlgMessage").replace("{entityId}",o)).then((function(t){t&&n.context.deleteEntity(r.join(":")).then((function(){window.location.reload()})).catch((function(t){n.processError(t)}))}))}}))},t.prototype.processError=function(t){this.dlg.open({title:"Ooops, smth went wrong",body:t.message,closable:!0,cancelable:!1})},t}(),F=function(){function t(t,e,n){this.slot=t,this.context=e,this.basePath=n,this.metaData=this.context.getMetaData(),this.slot.innerHTML+="<h1>"+a.i18n.getText("RootViewTitle")+"</h1>",this.renderEntitySelector()}return t.prototype.renderEntitySelector=function(){var t=this,e=this.metaData.getRootEntity().subEntities;this.slot&&Object(f.d)(this.slot).addChild("div",(function(n){return n.addClass("ed-root").addChild("div",(function(e){return e.addClass("ed-menu-description").addText(a.i18n.getText(t.metaData.isEmpty()?"ModelIsEmpty":"EntityMenuDesc"))})).addChild("ul",(function(n){n.addClass("ed-entity-menu"),e.forEach((function(e){n.addChild("li",(function(n){n.addClass("ed-entity-item").on("click",(function(){t.context.startProcess(),window.location.href=t.basePath+"/"+decodeURIComponent(e.id)})).addChild("div",(function(t){t.addClass("ed-entity-item-caption").addText(e.captionPlural||e.caption)})),e.description&&n.addChild("div",(function(t){t.addClass("ed-entity-item-descr").addText(""+e.description)}))}))}))}))}))},t}(),V=function(){function t(t){this.options={basePath:"easydata"},t=t||{},this.options=a.utils.assign(this.options,t),this.options.basePath=this.options.rootEntity?this.pretiffyPath(window.location.pathname):this.pretiffyPath(this.options.basePath),this.options.rootEntity&&(this.options.showBackToEntities=!1),this.setContainer(t.container);var e=document.createElement("div"),n=new k(e),i=this.container.parentElement;i.insertBefore(e,i.firstElementChild),this.context=new A({endpoint:t.endpoint,onProcessStart:function(){return n.show()},onProcessEnd:function(){return n.hide()}}),this.basePath=this.getBasePath()}return t.prototype.pretiffyPath=function(t){return t.replace(/^\/|\/$/g,"")},t.prototype.setContainer=function(t){if(t)if("string"==typeof t){if(t.length)if("#"===t[0])this.container=document.getElementById(t.substring(1));else{if("."!==t[0])throw Error("Unrecognized container parameter (Must be an element ID, a class name or HTMLElement object itself): "+t);var e=document.getElementsByClassName(t.substring(1));e.length&&(this.container=e[0])}}else this.container=t;else this.container=document.getElementById("EasyDataContainer")},t.prototype.getActiveEntityId=function(){if(this.options.rootEntity)return this.options.rootEntity;var t=decodeURIComponent(window.location.href),e=t.lastIndexOf("/"),n=t.substring(e+1);return n&&n.toLocaleLowerCase()!==this.options.basePath?n:null},t.prototype.getBasePath=function(){var t=decodeURIComponent(window.location.href),e=t.toLocaleLowerCase().indexOf(this.options.basePath);return t.substring(0,e+this.options.basePath.length)},t.prototype.run=function(){var t=this;return this.context.loadMetaData().then((function(){var e=t.getActiveEntityId();e?(t.context.setActiveEntity(e),new B(t.container,t.context,t.basePath,t.options)):new F(t.container,t.context,t.basePath)})).catch((function(t){return console.error(t)}))},t}();a.i18n.updateDefaultTexts({RequiredError:"Value is required.",NumberError:"Value should be a number",IntNumberError:"Value should be an integer number",LookupSelectedItem:"Selected item: ",LookupDlgCaption:"Select {entity}",None:"None",NavigationBtnTitle:"Navigation values",AddBtnTitle:"Add",EditBtn:"Edit",DeleteBtn:"Delete",AddDlgCaption:"Create {entity}",EditDlgCaption:"Edit {entity}",DeleteDlgCaption:"Delete {entity}",DeleteDlgMessage:"Are you shure about removing this entity: [{entityId}]?",EntityMenuDesc:"Click on an entity to view/edit its content",BackToEntities:"Back to entities",SearchBtn:"Search",SearchInputPlaceholder:"Search...",RootViewTitle:"Entities",ModelIsEmpty:"No entity was found."})}]);
//# sourceMappingURL=easydata.min.js.map