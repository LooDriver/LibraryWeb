/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./wwwroot/js/Module/AuthorizationComponent.js":
/*!*****************************************************!*\
  !*** ./wwwroot/js/Module/AuthorizationComponent.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Utils_cookieUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/cookieUtils */ \"./wwwroot/js/Utils/cookieUtils.js\");\n\nclass AuthFacade {\n  static Login(username, password) {\n    if (this.validateUserInformation(username, password)) {\n      $.post(`${this.authUrl}/login`, {\n        'username': username,\n        'password': password\n      }, data => {\n        (0,_Utils_cookieUtils__WEBPACK_IMPORTED_MODULE_0__.setCookie)(\"auth_key\", data.auth_key);\n        (0,_Utils_cookieUtils__WEBPACK_IMPORTED_MODULE_0__.setCookie)(\"permission\", data.role);\n        sessionStorage.setItem('userlogin', username);\n        sessionStorage.setItem('userid', data.userID);\n        this.handleSuccess();\n      }).fail(error => {\n        this.handleError(`<span>${error.responseText}</span><br>`, $('#div-login-error-message'));\n      });\n    } else {\n      this.handleError(`<span>Оба поля обязательны к заполнению.</span>`, $('#div-login-error-message'));\n    }\n  }\n  static Register(surname, name, username, password) {\n    $.post(`${this.authUrl}/register`, {\n      'surname': surname,\n      'name': name,\n      'username': username,\n      'password': password\n    }, () => {\n      window.location.reload();\n    }).fail(error => {\n      this.handleError(`<span>${error.responseText}</span><br>`, $('#div-register-error-message'));\n    });\n  }\n  static RecoveryAccount(accountName) {\n    if (accountName != '') {\n      $.post(`${this.authUrl}/validationAccount`, {\n        'username': accountName\n      }, () => {\n        sessionStorage.setItem('userlogin-recovery', accountName);\n        this.clearErrorMessage($('#div-recovery-code'));\n        this.clearErrorMessage($('#div-recovery-error-message'));\n        this.generatedCode = `${this.getRandomNumber(1000, 9999)}`;\n        $('#btn-code-confirm').removeAttr('style');\n        $('#div-recovery-code').append(`<div class=\"mb-3\">Код для восстановления аккаунта - ${this.generatedCode}<div>`);\n      }).fail(error => {\n        this.handleError(`<div class=\"mb-3\"><label>${error.responseText}</label><div>`, $('#div-recovery-error-message'));\n      });\n    } else {\n      this.handleError('<span>Логин является обязательным к заполнению.</span>', $('#div-recovery-error-message'));\n    }\n  }\n  static LogoutAccount() {\n    (0,_Utils_cookieUtils__WEBPACK_IMPORTED_MODULE_0__.deleteCookie)(\"auth_key\");\n    (0,_Utils_cookieUtils__WEBPACK_IMPORTED_MODULE_0__.deleteCookie)(\"permission\");\n    sessionStorage.clear();\n    window.location.href = \"/\";\n  }\n  static VerificationCode(codeInput) {\n    if (codeInput == this.generatedCode) {\n      $('#btn-form-recovery').text('Восстановить');\n      this.createChangePassword();\n      return true;\n    }\n    this.handleError('<span>Код неверный. Проверьте правильность введенного кода.</span>', $('#div-recovery-error-message'));\n  }\n  static ChangeRecoveryAccount(password, repeatPassword) {\n    if (this.validateUserNewPassword(password, repeatPassword)) {\n      $.post(`${this.authUrl}/recoveryAccount`, {\n        'username': sessionStorage.getItem('userlogin-recovery'),\n        'newPassword': password\n      }, () => {\n        sessionStorage.removeItem('userlogin-recovery');\n        alert('Данные для входа данного аккаунта изменены.\\nИспользуйте новые данные для входа');\n        window.location.reload();\n      }).fail(() => {\n        sessionStorage.removeItem('userlogin-recovery');\n      });\n    } else {\n      this.handleError('<span>Пароли должны быть одинаковыми.</span>', $('#div-error-password-message'));\n    }\n  }\n  static handleError(errorMessage, errorElement) {\n    errorElement.empty();\n    errorElement.append(errorMessage).css('color', 'red');\n  }\n  static handleSuccess() {\n    if ((0,_Utils_cookieUtils__WEBPACK_IMPORTED_MODULE_0__.getCookie)('permisson') == \"1\") {\n      $('#a-admin-panel').show();\n    }\n    $('#div-login-modal').modal('hide');\n    window.location.reload();\n  }\n  static getRandomNumber(min, max) {\n    return Math.floor(Math.random() * (Math.floor(max) - Math.ceil(min) + 1)) + min;\n  }\n  static clearErrorMessage(errorElement) {\n    errorElement.empty();\n  }\n  static createChangePassword() {\n    const passwordForm = `\n            <div class=\"mb-3\">\n                  <label for=\"input-form-password-recovery\" class=\"form-label\">Пароль</label>\n                  <input type=\"password\" class=\"form-control\" id=\"input-form-password-recovery\">\n\n                  <label for=\"input-form-repeat-password-recovery\" class=\"form-label\">Повторите пароль</label>\n                  <input type=\"password\" class=\"form-control\" id=\"input-form-repeat-password-recovery\">\n            </div>\n            <div id=\"div-error-password-message\"></div>\n        `;\n    $('#div-recovery-main-content-modal').empty();\n    $('#div-recovery-main-content-modal').append(passwordForm);\n  }\n  static validateUserInformation(username, password) {\n    return username != '' && password != '' ? true : false;\n  }\n  static validateUserNewPassword(password, repeatPassword) {\n    return password == repeatPassword;\n  }\n}\nAuthFacade.authUrl = '/api/auth';\nAuthFacade.generatedCode = '';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AuthFacade);\n\n//# sourceURL=webpack://asp.net/./wwwroot/js/Module/AuthorizationComponent.js?");

/***/ }),

/***/ "./wwwroot/js/Module/BooksComponent.js":
/*!*********************************************!*\
  !*** ./wwwroot/js/Module/BooksComponent.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Utils_ValidationFavoriteAndCartUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/ValidationFavoriteAndCartUtils */ \"./wwwroot/js/Utils/ValidationFavoriteAndCartUtils.js\");\n/* harmony import */ var _CommentComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CommentComponent */ \"./wwwroot/js/Module/CommentComponent.js\");\n\n\nclass Book {\n  static GetCurrentBookByName(bookTitle) {\n    $.get(this.bookUrl, {\n      'name': bookTitle\n    }).done(data => {\n      sessionStorage.setItem('bookData', JSON.stringify(data));\n      window.location.href = `/book/name?${data.название}`;\n    });\n  }\n  static GetAllBooks() {\n    $.get(`${this.bookUrl}/allBooks`).done(data => this.createTileBooks(data));\n  }\n  static createAboutBook(book) {\n    $('#span-information-quantity').text('0');\n    $('#h2-title-about-book').text(`${book.название}`);\n    $('#p-author-about-book').text(`${book.автор}`);\n    $('#p-genre-about-book').text(`Жанр - ${book.жанр}`);\n    $('#p-available-about-book').text(`Цена - ${book.цена} руб.`);\n    $('#p-quantity-about-book').text(`${book.наличие}`);\n    $('#img-cover-about-book').attr('src', `data:image/png;base64,${book.обложка}`);\n    $('#input-range-quantity-about-book').attr('max', `${book.наличие}`);\n    this.showCommentsIfLoggedIn(book.название);\n    if (sessionStorage.getItem('userid') !== undefined) {\n      this.setupFavoriteButton(book.название, '/api/favorite/existFavorite');\n      this.setupCartButton(book.название, '/api/cart/existCartItem');\n    }\n  }\n  static showCommentsIfLoggedIn(bookTitle) {\n    _CommentComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].ShowAllComments(bookTitle);\n    sessionStorage.getItem('userid') === null ? $('#form-new-comments').hide() : $('#form-new-comments').show();\n  }\n  static setupFavoriteButton(bookTitle, url) {\n    this.setupButton('#btn-favorite-about-book', bookTitle, url, 'Удалить из избранного', 'Добавить в избранное');\n  }\n  static setupCartButton(bookTitle, url) {\n    this.setupButton('#btn-cart-book', bookTitle, url, 'Удалить из корзины', 'Добавить в корзину');\n  }\n  static setupButton(buttonId, bookTitle, url, successText, failureText) {\n    (0,_Utils_ValidationFavoriteAndCartUtils__WEBPACK_IMPORTED_MODULE_0__.checkIfFavoriteOrCartExists)(bookTitle, url).then(result => $(buttonId).text(result ? successText : failureText));\n  }\n  static createTileBooks(books) {\n    const bookTiles = books.map(book => `\n            <div class=\"col-md-2 mt-3\">\n                <div class=\"tile\">\n                    <div class=\"tile-content\">\n                     <div class=\"tile-book\" style=\"display:none;\">${book.название}</div>\n                        <figure>\n                        <button class=\"btn-about-book\" ${book.наличие == 0 ? 'disabled=\"true\"' : ''}>\n                            <img src=\"data:image/png;base64,${book.обложка}\" width=\"150\" height=\"200\">\n                        </button>\n                            <figcaption>${book.наличие == 0 ? 'Нету в наличии книги' : ''} ${book.название}</figcaption>\n                        </figure>\n                    </div>\n                </div>\n            </div>`);\n    $('#tileContainer').append('<div class=\"row\">' + bookTiles.join('') + '</div>');\n  }\n  static clearUrlBook(bookUrl) {\n    return bookUrl.substr(bookUrl.indexOf('?') + 1);\n  }\n}\nBook.bookUrl = '/api/books';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Book);\n\n//# sourceURL=webpack://asp.net/./wwwroot/js/Module/BooksComponent.js?");

/***/ }),

/***/ "./wwwroot/js/Module/CartComponent.js":
/*!********************************************!*\
  !*** ./wwwroot/js/Module/CartComponent.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Utils_ValidationFavoriteAndCartUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/ValidationFavoriteAndCartUtils */ \"./wwwroot/js/Utils/ValidationFavoriteAndCartUtils.js\");\n\nclass Cart {\n  static AddNewCartItem(orderName, quantity = 0) {\n    const maxQuantity = Number.parseInt($('#p-quantity-about-book').text().toString());\n    (0,_Utils_ValidationFavoriteAndCartUtils__WEBPACK_IMPORTED_MODULE_0__.checkIfFavoriteOrCartExists)(orderName, `${this.cartUrl}/existCartItem`).then(result => {\n      if (result) {\n        $('#btn-cart-book').text('Удалить из корзины');\n      } else {\n        if (quantity > maxQuantity || quantity <= 0) {\n          $('#span-information-quantity').text(`Количество не может быть больше максимального значения ${$('#input-quantity-about-book').attr('max')} или меньше нуля`).css('color', 'red');\n          $('#input-quantity-about-book').val('1');\n        } else {\n          $.post(`${this.cartUrl}/addCartItem`, {\n            'bookName': orderName,\n            'userID': sessionStorage.getItem('userid'),\n            'quantity': quantity\n          }, () => {\n            window.location.reload();\n          });\n        }\n      }\n    });\n  }\n  static ShowCartList() {\n    $.get(`${this.cartUrl}/allCartItems`, {\n      'userID': sessionStorage.getItem('userid')\n    }, data => {\n      this.cartElementsCreate(data);\n    });\n  }\n  static DeleteCartItem(orderDelete) {\n    $.post(`${this.cartUrl}/deleteCartItem`, {\n      'cartItemDelete': orderDelete\n    }, () => {\n      window.location.reload();\n    });\n  }\n  static ClearCart() {\n    $.post(`${this.cartUrl}/clearCart`, {\n      'userID': sessionStorage.getItem('userid')\n    }, () => {\n      window.location.reload();\n    });\n  }\n  static cartElementsCreate(cartData) {\n    var countCartBooks = 1;\n    const cartTableElem = cartData.map(cart => `\n            <tr>\n                <th scope=\"row\">${countCartBooks++}</th>\n                    <td class=\"td-book-name\">${cart.кодКнигиNavigation.название}</td>\n                    <td id=\"td-cart-book-cost\">${cart.кодКнигиNavigation.цена} руб.</td>\n                    <td id=\"td-cart-book-count\">${cart.количество}</td>\n                    <td><button type=\"button\" class=\"btn btn-sm btn-danger\" id=\"btn-delete-cart-item\">Удалить</button></td>\n            </tr>\n        `);\n    $('#tbody-cart-items').append(cartTableElem.join(\"\"));\n    var sumCostBook = Number.parseInt($('#td-cart-book-cost').text()) * Number.parseInt($('#td-cart-book-count').text());\n    $('#h4-final-sum').text(`Общая сумма - ${isNaN(sumCostBook) ? 0 : sumCostBook} руб.`);\n  }\n  static selectFillPickupPoint() {\n    var data = JSON.parse(sessionStorage.getItem('pickup_point_data'));\n    const selectHtmlElem = data.map(select => `<option>${select.адрес} | ${select.название}</option>`);\n    $('#select-pickup-point').append(selectHtmlElem.join(''));\n  }\n}\nCart.cartUrl = '/api/cart';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Cart);\n\n//# sourceURL=webpack://asp.net/./wwwroot/js/Module/CartComponent.js?");

/***/ }),

/***/ "./wwwroot/js/Module/CommentComponent.js":
/*!***********************************************!*\
  !*** ./wwwroot/js/Module/CommentComponent.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Comments {\n  static PostNewComment(comments) {\n    $.post(`${this.commentUrl}/addComment`, {\n      'comment': comments,\n      'userID': sessionStorage.getItem('userid'),\n      'bookName': $('#h2-title-about-book').text()\n    }, () => {\n      $('#textarea-user-comment').empty();\n      window.location.reload();\n    });\n  }\n  static ShowAllComments(book) {\n    $.get(`${this.commentUrl}/getAllComments`, {\n      'bookName': book\n    }, data => {\n      this.createComments(data);\n    });\n  }\n  static createComments(comments) {\n    const commentHtmlView = comments.map(comment => `\n                <div class=\"comment\">\n                    <a class=\"btn a-redirect-comment-user-profile\"><span class=\"author\">${comment.кодПользователяNavigation.логин}</span></a>\n                    <div class=\"content\">${comment.текстКомментария}</div>\n                </div>`);\n    $('#section-users-comments').append(commentHtmlView.join(''));\n  }\n}\nComments.commentUrl = '/api/comment';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Comments);\n\n//# sourceURL=webpack://asp.net/./wwwroot/js/Module/CommentComponent.js?");

/***/ }),

/***/ "./wwwroot/js/Module/FavoriteComponent.js":
/*!************************************************!*\
  !*** ./wwwroot/js/Module/FavoriteComponent.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Utils_ValidationFavoriteAndCartUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Utils/ValidationFavoriteAndCartUtils */ \"./wwwroot/js/Utils/ValidationFavoriteAndCartUtils.js\");\n\nclass Favorite {\n  static AddBookToFavorite(bookName) {\n    (0,_Utils_ValidationFavoriteAndCartUtils__WEBPACK_IMPORTED_MODULE_0__.checkIfFavoriteOrCartExists)(bookName, `${this.favoriteUrl}/existFavorite`).then(result => {\n      if (result) {\n        $('#btn-favorite-about-book').text('Удалить из избранного');\n      } else {\n        $.post(`${this.favoriteUrl}/addFavorite`, {\n          'nameBook': bookName,\n          'userID': sessionStorage.getItem('userid')\n        }, () => {\n          window.location.reload();\n        });\n      }\n    });\n  }\n  static ShowListFavorite() {\n    $.get(`${this.favoriteUrl}/getFavorite`, {\n      'userID': sessionStorage.getItem('userid')\n    }, data => {\n      var arr = [];\n      data.forEach(data => {\n        arr.push('<li>');\n        arr.push(`<a class=\"btn text-align-center\" href=\"/book/name?${encodeURIComponent(data.кодКнигиNavigation.название)}\" id=\"a-redirect-about-book\">${data.кодКнигиNavigation.название}</a>`);\n        arr.push('</li>');\n      });\n      $('#div-favorite-list').append(arr.join(\"\"));\n    });\n  }\n  static RemoveFromFavorite(bookName) {\n    $.post(`${this.favoriteUrl}/deleteFavorite`, {\n      'bookName': bookName\n    }, () => {\n      window.location.reload();\n    });\n  }\n}\nFavorite.favoriteUrl = '/api/favorite';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Favorite);\n\n//# sourceURL=webpack://asp.net/./wwwroot/js/Module/FavoriteComponent.js?");

/***/ }),

/***/ "./wwwroot/js/Module/OrderComponent.js":
/*!*********************************************!*\
  !*** ./wwwroot/js/Module/OrderComponent.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _BooksComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BooksComponent */ \"./wwwroot/js/Module/BooksComponent.js\");\n\nclass Order {\n  static AddNewOrder(elementHref, pickupPoint) {\n    var orderBooks = [];\n    document.querySelectorAll(`${elementHref}`).forEach(links => {\n      orderBooks.push(_BooksComponent__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clearUrlBook(decodeURI(links.getAttribute('href'))));\n    });\n    $.post(`${this.orderUrl}/addOrder`, {\n      'bookName': orderBooks,\n      'userID': sessionStorage.getItem('userid'),\n      'selectedPoint': pickupPoint\n    });\n  }\n  static ShowOrders() {\n    $.get(`${this.orderUrl}/getOrder`, {\n      'userID': sessionStorage.getItem('userid')\n    }, data => {\n      this.tableOrderFill(data);\n    });\n  }\n  static tableOrderFill(orders) {\n    var ordersUser = [];\n    var countOrders = 1;\n    orders.forEach(orders => {\n      var bookName = orders.кодКнигиNavigation.название;\n      ordersUser.push('<tr>');\n      ordersUser.push(`<th scope=\"row\">${countOrders++}</th>`);\n      ordersUser.push(`<td><a id=\"a-redirect-profile-book\" class=\"btn\" href=\"/book/name?${bookName}\"</a>${bookName}</td>`);\n      ordersUser.push(`<td>${orders.датаЗаказа}</td>`);\n      ordersUser.push(`<td>${orders.статус}</td>`);\n      ordersUser.push(`<td>${orders.кодПунктаВыдачиNavigation.название}</td>`);\n      ordersUser.push('</tr>');\n    });\n    $('#tbody-profile-table').append(ordersUser.join(\"\"));\n  }\n}\nOrder.orderUrl = '/api/order';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Order);\n\n//# sourceURL=webpack://asp.net/./wwwroot/js/Module/OrderComponent.js?");

/***/ }),

/***/ "./wwwroot/js/Module/PickupPointComponent.js":
/*!***************************************************!*\
  !*** ./wwwroot/js/Module/PickupPointComponent.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass PickupPoint {\n  static SetPickupPointData() {\n    if (!sessionStorage.getItem('pickup_point_data')) {\n      $.get(`/api/pickup/allPickupPoints`, data => {\n        sessionStorage.setItem('pickup_point_data', JSON.stringify(data));\n      });\n    }\n  }\n  static ShowPickupPoints() {\n    $.get(`${this.pickupUrl}/allPickupPoints`, data => {\n      const pickupElements = data.map(pickup => `\n                <div class=\"col-md-2 mt-3 card-wrapper\">\n                    <div class=\"card\">\n                        <div class=\"card-body\">\n                        <h5 class=\"card-title\">${pickup.название}</h5>\n                        <p class=\"card-text\">${pickup.адрес}</p>\n                        </div>\n                    </div>\n                </div>`);\n      $('#div-show-pickup').append(pickupElements.join(\"\"));\n    });\n  }\n}\nPickupPoint.pickupUrl = '/api/pickup';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PickupPoint);\n\n//# sourceURL=webpack://asp.net/./wwwroot/js/Module/PickupPointComponent.js?");

/***/ }),

/***/ "./wwwroot/js/Module/ProfileComponent.js":
/*!***********************************************!*\
  !*** ./wwwroot/js/Module/ProfileComponent.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Module_AuthorizationComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Module/AuthorizationComponent */ \"./wwwroot/js/Module/AuthorizationComponent.js\");\n\nclass Profile {\n  static ShowProfileInfo() {\n    if (sessionStorage.getItem('userid') != undefined) {\n      $.get(`${this.profileUrl}/profileInformation`, {\n        'userID': sessionStorage.getItem('userid')\n      }, data => {\n        this.SetupElements(data);\n      });\n    } else if (sessionStorage.getItem('commentUsername') != undefined) {\n      $.get(`${this.profileUrl}/commentProfileInformation`, {\n        'username': sessionStorage.getItem('commentUsername')\n      }, data => {\n        this.DisableElements();\n        this.SetupElements(data);\n      });\n    }\n  }\n  static EditProfileInfo(name, surname, username) {\n    $.post(`${this.profileUrl}/editProfile?userID=${sessionStorage.getItem('userid')}`, {\n      'name': name,\n      'surname': surname,\n      'username': username\n    }, () => {\n      window.location.reload();\n      sessionStorage.setItem('userlogin', username);\n    });\n  }\n  static EditProfilePhoto() {\n    $.post(`${this.profileUrl}/editPhoto`, {\n      'userID': sessionStorage.getItem('userid'),\n      'photoData': sessionStorage.getItem('imgData')\n    }, () => {\n      window.location.reload();\n    });\n  }\n  static EditProfilePassword(password, repeatPassword) {\n    if (this.validateUserPassword(password, repeatPassword)) {\n      $.post(`${this.profileUrl}/editPassword`, {\n        'userID': sessionStorage.getItem('userid'),\n        'password': password\n      }, () => {\n        alert('Данные успешно изменены. Авторизуйтесь под новыми данными.');\n        _Module_AuthorizationComponent__WEBPACK_IMPORTED_MODULE_0__[\"default\"].LogoutAccount();\n      }).fail(error => {\n        this.handleError(`<span>${error.responseText}</span>`, $('#div-error-change-message'));\n      });\n    } else {\n      this.handleError(`<span>Пароли должны быть одинаковыми.</span>`, $('#div-error-change-message'));\n    }\n  }\n  static handleError(errorMessage, errorElement) {\n    errorElement.empty();\n    errorElement.append(errorMessage).css('color', 'red');\n  }\n  static validateUserPassword(password, repeatPassword) {\n    return password == repeatPassword;\n  }\n  static DisableElements() {\n    $('#a-profile-modal-image').removeAttr('data-bs-toggle').removeAttr('data-bs-target');\n    $('#btn-profile-information-edit').hide();\n    $('#btn-profile-information-password-edit').hide();\n    $('#btn-logout-profile').hide();\n    $('.form-user-information :input').attr('disabled', 'true');\n  }\n  static SetupElements(data) {\n    if (sessionStorage.getItem('commentUsername') != undefined) {\n      $('#input-form-edit-login').val('*******');\n    } else {\n      $('#input-form-edit-login').val(`${data.login}`);\n    }\n    $('#input-form-edit-surname').val(`${data.surname}`);\n    $('#input-form-edit-name').val(`${data.name}`);\n    $('#img-photo-profile').attr('src', `data:image/png;base64,${data.photo}`);\n    $('#img-photo-edit-modal').attr('src', `data:image/png;base64,${data.photo}`);\n    $('#img-photo-edit-modal-medium').attr('src', `data:image/png;base64,${data.photo}`);\n    $('#img-photo-edit-modal-small').attr('src', `data:image/png;base64,${data.photo}`);\n  }\n  static Checker() {\n    if (sessionStorage.getItem('userid') != null) {\n      return true;\n    } else if (sessionStorage.getItem('commentUsername') != null) {\n      return false;\n    }\n  }\n}\nProfile.profileUrl = '/api/profile';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Profile);\n\n//# sourceURL=webpack://asp.net/./wwwroot/js/Module/ProfileComponent.js?");

/***/ }),

/***/ "./wwwroot/js/Utils/ValidationFavoriteAndCartUtils.js":
/*!************************************************************!*\
  !*** ./wwwroot/js/Utils/ValidationFavoriteAndCartUtils.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkIfFavoriteOrCartExists: () => (/* binding */ checkIfFavoriteOrCartExists)\n/* harmony export */ });\nfunction checkIfFavoriteOrCartExists(currentBook, url) {\n  return new Promise(resolve => {\n    $.get(url, {\n      'userID': sessionStorage.getItem('userid'),\n      'bookName': currentBook\n    }, () => {\n      resolve(true);\n    }).fail(() => {\n      resolve(false);\n    });\n  });\n}\n\n//# sourceURL=webpack://asp.net/./wwwroot/js/Utils/ValidationFavoriteAndCartUtils.js?");

/***/ }),

/***/ "./wwwroot/js/Utils/cookieUtils.js":
/*!*****************************************!*\
  !*** ./wwwroot/js/Utils/cookieUtils.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteCookie: () => (/* binding */ deleteCookie),\n/* harmony export */   getCookie: () => (/* binding */ getCookie),\n/* harmony export */   setCookie: () => (/* binding */ setCookie)\n/* harmony export */ });\nfunction setCookie(name, val) {\n  const date = new Date();\n  const value = val;\n  date.setTime(date.getTime() + 7 * 24 * 60 * 60 * 1000);\n  document.cookie = name + \"=\" + value + \"; expires=\" + date.toUTCString() + \"; path=/\";\n}\nfunction getCookie(name) {\n  const value = \"; \" + document.cookie;\n  const parts = value.split(\"; \" + name + \"=\");\n  if (parts.length == 2) {\n    return parts.pop().split(\";\").shift();\n  } else {\n    return \"\";\n  }\n}\nfunction deleteCookie(name) {\n  const date = new Date();\n  date.setTime(date.getTime() + -1 * 24 * 60 * 60 * 1000);\n  document.cookie = name + \"=; expires=\" + date.toUTCString() + \"; path=/\";\n}\n\n//# sourceURL=webpack://asp.net/./wwwroot/js/Utils/cookieUtils.js?");

/***/ }),

/***/ "./wwwroot/js/main.js":
/*!****************************!*\
  !*** ./wwwroot/js/main.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Module_AuthorizationComponent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Module/AuthorizationComponent */ \"./wwwroot/js/Module/AuthorizationComponent.js\");\n/* harmony import */ var _Module_CommentComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Module/CommentComponent */ \"./wwwroot/js/Module/CommentComponent.js\");\n/* harmony import */ var _Module_BooksComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Module/BooksComponent */ \"./wwwroot/js/Module/BooksComponent.js\");\n/* harmony import */ var _Module_FavoriteComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Module/FavoriteComponent */ \"./wwwroot/js/Module/FavoriteComponent.js\");\n/* harmony import */ var _Module_OrderComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Module/OrderComponent */ \"./wwwroot/js/Module/OrderComponent.js\");\n/* harmony import */ var _Module_PickupPointComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Module/PickupPointComponent */ \"./wwwroot/js/Module/PickupPointComponent.js\");\n/* harmony import */ var _Module_CartComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Module/CartComponent */ \"./wwwroot/js/Module/CartComponent.js\");\n/* harmony import */ var _Module_ProfileComponent__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Module/ProfileComponent */ \"./wwwroot/js/Module/ProfileComponent.js\");\n/* harmony import */ var _Utils_cookieUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Utils/cookieUtils */ \"./wwwroot/js/Utils/cookieUtils.js\");\n\n\n\n\n\n\n\n\n\n\nfunction readFileAsByteArray(input, callback) {\n  const reader = new FileReader();\n  const files = $(input).prop('files');\n  if (files && files.length > 0) {\n    const file = files[0];\n    reader.onload = event => {\n      var _a;\n      const arrayBuffer = (_a = event.target) === null || _a === void 0 ? void 0 : _a.result;\n      const byteArray = new Uint8Array(arrayBuffer);\n      callback(byteArray);\n    };\n    reader.readAsArrayBuffer(file);\n  }\n}\nfunction byteArrayToBase64(byteArray) {\n  return new Promise(resolve => {\n    const blob = new Blob([byteArray], {\n      type: 'application/octet-stream'\n    });\n    const reader = new FileReader();\n    reader.onload = () => {\n      if (typeof reader.result === 'string') {\n        resolve(reader.result.split(',')[1]);\n      } else {\n        resolve(null);\n      }\n    };\n    reader.readAsDataURL(blob);\n  });\n}\n$(function () {\n  $('#btn-new-comment').on('click', function (event) {\n    event.preventDefault();\n    if ((0,_Utils_cookieUtils__WEBPACK_IMPORTED_MODULE_8__.getCookie)('auth_key') != \"\") {\n      _Module_CommentComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].PostNewComment($('#textarea-user-comment').val().toString());\n    } else {\n      alert(\"Войдите для того чтобы оставить комментарии\");\n    }\n  });\n  $('#btn-profile-photo-change').on('click', function (event) {\n    event.preventDefault();\n    readFileAsByteArray($('#input-photo-edit').get(0), byteArray => {\n      byteArrayToBase64(byteArray).then(base64String => {\n        sessionStorage.setItem('imgData', base64String);\n        _Module_ProfileComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"].EditProfilePhoto();\n      });\n    });\n  });\n  $('#btn-form-profile-edit').on('click', function (event) {\n    event.preventDefault();\n    if ($('#input-form-password-edit').val().toString() != '' && $('#input-form-password-edit-repeat').val().toString() != '') {\n      _Module_ProfileComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"].EditProfilePassword($('#input-form-password-edit').val().toString(), $('#input-form-password-edit-repeat').val().toString());\n    } else {\n      $('#div-error-change-message').empty();\n      $('#div-error-change-message').append('<span>Оба поля являются обязательными к заполнению.').css('color', 'red');\n    }\n  });\n  $('#btn-profile-information-edit').on('click', function (event) {\n    event.preventDefault();\n    _Module_ProfileComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"].EditProfileInfo($('#input-form-edit-name').val().toString(), $('#input-form-edit-surname').val().toString(), $('#input-form-edit-login').val().toString());\n  });\n  $('#btn-order-clear').on('click', function (event) {\n    event.preventDefault();\n    _Module_CartComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].ClearCart();\n  });\n  $('#btn-logout-profile').on('click', function () {\n    _Module_AuthorizationComponent__WEBPACK_IMPORTED_MODULE_0__[\"default\"].LogoutAccount();\n  });\n  $('#btn-favorite-show').on('click', function (event) {\n    event.preventDefault();\n    if ((0,_Utils_cookieUtils__WEBPACK_IMPORTED_MODULE_8__.getCookie)(\"auth_key\") != \"\") {\n      $('#div-favorite-list').empty();\n      _Module_FavoriteComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"].ShowListFavorite();\n    } else {\n      $('#div-favorite-list').text('Здесь пока ничего нету, для того чтобы добавить книгу в избранное нужно зайти в свои профиль');\n    }\n  });\n  $('#btn-favorite-about-book').on('click', function (event) {\n    event.preventDefault();\n    if ((0,_Utils_cookieUtils__WEBPACK_IMPORTED_MODULE_8__.getCookie)(\"auth_key\") != \"\") {\n      if ($('#btn-favorite-about-book').text().includes('Добавить')) {\n        _Module_FavoriteComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"].AddBookToFavorite($('#h2-title-about-book').text());\n      } else {\n        _Module_FavoriteComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"].RemoveFromFavorite($('#h2-title-about-book').text());\n      }\n    } else {\n      alert(\"Войдите в профиль для сохранение книги в избранное.\");\n    }\n  });\n  $('#btn-cart-book').on('click', function (event) {\n    event.preventDefault();\n    if ((0,_Utils_cookieUtils__WEBPACK_IMPORTED_MODULE_8__.getCookie)(\"auth_key\") != \"\") {\n      if ($('#btn-cart-book').text().includes('Добавить')) {\n        _Module_CartComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].AddNewCartItem($('#h2-title-about-book').text(), Number.parseInt($('#span-information-quantity').text().toString()));\n      } else {\n        _Module_CartComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].DeleteCartItem($('#h2-title-about-book').text());\n      }\n    } else {\n      alert(\"Войдите в профиль для сохранение книги в корзину.\");\n    }\n  });\n  $(document).ready(function () {\n    const currentUrl = window.location.href.substring(window.location.href.indexOf('8') + 1);\n    if ((0,_Utils_cookieUtils__WEBPACK_IMPORTED_MODULE_8__.getCookie)('permission') === '1') $('#a-admin-panel').removeAttr('style');\n    $('#p-user-login').text(sessionStorage.getItem('userlogin') ? `Добро пожаловать - ${sessionStorage.getItem('userlogin')}` : 'Войти');\n    if (window.location.href.includes('/book/name')) _Module_BooksComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"].createAboutBook(JSON.parse(sessionStorage.getItem('bookData')));\n    if (sessionStorage.getItem('userlogin')) $('#btn-login').removeAttr('data-bs-toggle data-bs-target').attr('href', '/profile');\n    switch (currentUrl) {\n      case '/':\n        {\n          _Module_BooksComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"].GetAllBooks();\n          break;\n        }\n      case '/cart':\n        {\n          _Module_PickupPointComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].SetPickupPointData();\n          _Module_CartComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].ShowCartList();\n          _Module_CartComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].selectFillPickupPoint();\n          break;\n        }\n      case '/profile':\n        {\n          _Module_OrderComponent__WEBPACK_IMPORTED_MODULE_4__[\"default\"].ShowOrders();\n          _Module_ProfileComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"].ShowProfileInfo();\n          break;\n        }\n      case '/pickup-point':\n        {\n          _Module_PickupPointComponent__WEBPACK_IMPORTED_MODULE_5__[\"default\"].ShowPickupPoints();\n          break;\n        }\n    }\n  });\n  $('#btn-code-verification').on('click', function (event) {\n    event.preventDefault();\n    _Module_AuthorizationComponent__WEBPACK_IMPORTED_MODULE_0__[\"default\"].RecoveryAccount($('#input-form-username-recovery').val().toString());\n  });\n  $('#btn-form-recovery').on('click', function (event) {\n    event.preventDefault();\n    if ($('#btn-form-recovery').text().includes('Восстановить')) {\n      if ($('#input-form-password-recovery').val().toString() != '' && $('#input-form-repeat-password-recovery').val().toString() != '') {\n        _Module_AuthorizationComponent__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ChangeRecoveryAccount($('#input-form-password-recovery').val().toString(), $('#input-form-repeat-password-recovery').val().toString());\n      } else {\n        $('#div-error-password-message').empty();\n        $('#div-error-password-message').append('<span>Оба поля являются обязательными к заполнению.').css('color', 'red');\n      }\n    }\n  });\n  $('#btn-code-confirm').on('click', function (event) {\n    event.preventDefault();\n    var values = $('.div-input-recovery-code input').map(function () {\n      return $(this).val();\n    }).get().join('');\n    _Module_AuthorizationComponent__WEBPACK_IMPORTED_MODULE_0__[\"default\"].VerificationCode(values);\n  });\n  $(document).on('click', '#a-redirect-cart-about-book, #a-redirect-profile-book, #a-redirect-about-book', function (event) {\n    event.preventDefault();\n    _Module_BooksComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"].GetCurrentBookByName(_Module_BooksComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"].clearUrlBook(decodeURI(this.getAttribute('href'))));\n  });\n  $('#tbody-cart-items').on('click', '#btn-delete-cart-item', function (event) {\n    event.preventDefault();\n    _Module_CartComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].DeleteCartItem($(this).closest('tr').find('.td-book-name').text());\n  });\n  $('#input-range-quantity-about-book').on('change input', function (event) {\n    $('#span-information-quantity').text($(event.target).val().toString());\n  });\n  $('#tileContainer').on('click', '.btn-about-book', function (event) {\n    event.preventDefault();\n    _Module_BooksComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"].GetCurrentBookByName($(this).closest('.tile').find('.tile-book').text());\n  });\n  $('#btn-order-success').on('click', function (event) {\n    event.preventDefault();\n    _Module_OrderComponent__WEBPACK_IMPORTED_MODULE_4__[\"default\"].AddNewOrder('#a-redirect-cart-about-book', $('#select-pickup-point option:selected').index() + 1);\n    _Module_CartComponent__WEBPACK_IMPORTED_MODULE_6__[\"default\"].ClearCart();\n  });\n  $('#btn-form-login').on('click', function (event) {\n    event.preventDefault();\n    _Module_AuthorizationComponent__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Login($('#input-form-login-auth').val().toString(), $('#input-form-password-auth').val().toString());\n  });\n  $('#btn-form-register').on('click', function (event) {\n    event.preventDefault();\n    if ($('#input-form-password-register').val() == $('#input-form-password-repeat').val()) {\n      _Module_AuthorizationComponent__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Register($('#input-form-surname-register').val().toString(), $('#input-form-name-register').val().toString(), $('#input-form-username-register').val().toString(), $('#input-form-password-register').val().toString());\n    } else {\n      $('#span-register-error').text(\"Пароли должны быть одинаковые\").css('color', 'red');\n    }\n  });\n  $('#section-users-comments').on('click', '.a-redirect-comment-user-profile', function (event) {\n    event.preventDefault();\n    var username = $(this).closest('.a-redirect-comment-user-profile').find('.author').text();\n    sessionStorage.setItem('commentUsername', username);\n    window.location.href = \"/profile\";\n    _Module_ProfileComponent__WEBPACK_IMPORTED_MODULE_7__[\"default\"].ShowProfileInfo();\n  });\n});\n\n//# sourceURL=webpack://asp.net/./wwwroot/js/main.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./wwwroot/js/main.js");
/******/ 	
/******/ })()
;